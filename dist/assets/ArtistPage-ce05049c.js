import{g as y,h as g,c as S,r as k,i as p,m as w,u as B,k as f,j as v,T as L,a as C}from"./TheFooter-ed33e514.js";import{_ as I,o as r,c as d,b as l,t as u,F as x,i as P,g as N,p as T,h as $,d as m}from"./index-49e1ebc2.js";const _=y(S),D=g(_,"getSpotifyToken"),M=g(_,"getArtist"),F=g(_,"getAlbums"),G=g(_,"getRelatedArtists"),U=g(_,"getUnrelatedArtists"),A=g(_,"updateProfile"),Z={data(){return{artist:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:""}},created(){this.refresh(this.$route.params.aid,!1)},methods:{refresh(e,t){D().then(s=>{M({token:s.data.access_token,id:e}).then(i=>{this.artist=i.data,this.genres="",i.data.genres.forEach(a=>{this.genres+=a+" - "}),F({token:s.data.access_token,id:e}).then(a=>{this.albums=a.data.items.sort(this.compareDates),t||G({token:s.data.access_token,id:e}).then(n=>{let o=0;do if(this.mostRelated=n.data.artists[o],o++,o==20){this.refresh(n.data.artists[19].id,!1);return}while(k(this.mostRelated.id));U({token:s.data.access_token,limit:20,genres:i.data.genres,backup:this.lastSuggestedGenre}).then(h=>{console.log(h.data),this.lastSuggestedGenre=h.data.genre;let b=0;do this.leastRelated=h.data.artists[b],b++;while(k(this.leastRelated.id))}).catch(h=>{console.log(h)})}).catch(n=>{console.log(n)})}).catch(a=>{console.log(a)})}).catch(i=>{console.log(i)})}).catch(s=>{console.log(s)})},toggleLikeAlbum(e){this.toggleLike(e,"likedAlbums")},toggleLikeArtist(e){this.toggleLike(e,"likedArtists")},toggleLike(e,t){if(p()){let s=f();if(s[t].find(i=>i.id==e.id)){s[t].splice(s[t].indexOf(e),1);let i=s[t];A({id:w(),field:t,value:i}).then(a=>{this.refresh(this.$route.params.aid,!0)}).catch(a=>{console.log(a)}),v(s)}else{s[t].push(e);let i=s[t];A({id:w(),field:t,value:i}).then(a=>{this.refresh(this.$route.params.aid,!0)}).catch(a=>{console.log(a)}),v(s)}}else console.log("Not Logged In")},isRepeat(e){let t=this.albums.indexOf(e);if(t==0)return!1;if(t!=-1){let s=this.albums[t-1];return e.name==s.name}},compareDates(e,t){let s=new Date(e.release_date),i=new Date(t.release_date);return s<i?-1:s>i?1:0},goToNewArtist(e){B(e),this.$router.push({name:"ArtistPage",params:{aid:e}}),this.refresh(e,!1)},isLikedAlbum(e){return this.checkLike(e,f().likedAlbums)},isLikedArtist(e){return this.checkLike(e,f().likedArtists)},checkLike(e,t){return p()?t.find(s=>s.id==e.id):!1}}},c=e=>(T("data-v-fe57eb13"),e=e(),$(),e),O={class:"body"},V=c(()=>l("br",null,null,-1)),j={class:"artistName"},z={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heartbreak-fill",viewBox:"0 0 16 16"},E=c(()=>l("path",{d:"M8.931.586 7 3l1.5 4-2 3L8 15C22.534 5.396 13.757-2.21 8.931.586ZM7.358.77 5.5 3 7 7l-1.5 3 1.815 4.537C-6.533 4.96 2.685-2.467 7.358.77Z"},null,-1)),H=[E],q={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},J=c(()=>l("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),K=[J],Q={class:"artistGenre"},W=c(()=>l("br",null,null,-1)),X=c(()=>l("br",null,null,-1)),Y=c(()=>l("br",null,null,-1)),ee=c(()=>l("br",null,null,-1)),te={style:{"background-color":"black"}},se={key:0,class:"albumResult"},le=["src"],ie={class:"albumInfo"},oe=["onClick"],ae={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heartbreak-fill",viewBox:"0 0 16 16"},ne=c(()=>l("path",{d:"M8.931.586 7 3l1.5 4-2 3L8 15C22.534 5.396 13.757-2.21 8.931.586ZM7.358.77 5.5 3 7 7l-1.5 3 1.815 4.537C-6.533 4.96 2.685-2.467 7.358.77Z"},null,-1)),re=[ne],de={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},ce=c(()=>l("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),he=[ce];function ue(e,t,s,i,a,n){return r(),d("section",O,[V,l("p",j,u(this.artist.name),1),l("button",{onClick:t[0]||(t[0]=o=>n.toggleLikeArtist(this.artist)),type:"button",class:"btn btn-outline-danger",style:{position:"absolute",left:"72.5%"}},[n.isLikedArtist(this.artist)?(r(),d("svg",z,H)):(r(),d("svg",q,K))]),l("p",Q,u(this.genres),1),l("button",{class:"btn-get-started",onClick:t[1]||(t[1]=o=>n.goToNewArtist(this.mostRelated.id))},"Related Artist: "+u(this.mostRelated.name),1),l("button",{class:"btn-get-started",onClick:t[2]||(t[2]=o=>n.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+u(this.leastRelated.name),1),W,X,Y,ee,l("ul",te,[(r(!0),d(x,null,P(this.albums,o=>(r(),d("li",null,[this.isRepeat(o)?N("",!0):(r(),d("div",se,[l("img",{src:o.images[0].url,alt:"Album Cover"},null,8,le),l("div",ie,[l("button",{onClick:h=>n.toggleLikeAlbum(o),type:"button",class:"btn btn-outline-danger",style:{position:"absolute",left:"72.5%"}},[n.isLikedAlbum(o)?(r(),d("svg",ae,re)):(r(),d("svg",de,he))],8,oe),l("h1",null,u(o.name),1),l("h3",null,u(o.release_date),1)])]))]))),256))])])}const R=I(Z,[["render",ue],["__scopeId","data-v-fe57eb13"]]),ge={class:"wrapper"},_e={name:"ArtistPage",components:{TheHeader:L,ArtistPageBody:R,TheFooter:C}},be=Object.assign(_e,{setup(e){return(t,s)=>(r(),d(x,null,[l("header",null,[m(L),l("div",ge,[m(R)])]),l("main",null,[m(C)])],64))}});export{be as default};
