import{g as L,a as I,h as u,b as x,d as S,r as m,u as b,e as f,s as w,T as A,f as y}from"./TheFooter-2ba53875.js";import{_ as B,r as N,o as d,c,a as s,f as p,b as P,t as g,F as C,i as T,h as $,p as z,e as M}from"./index-e5694108.js";const _=L(x),D=I(x),j=u(_,"getSpotifyToken"),F=u(_,"getArtist"),G=u(_,"getAlbums"),v=u(_,"getRelatedArtists"),V=u(_,"getUnrelatedArtists"),k=u(_,"updateProfile"),Z={data(){return{artist:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:"",loggedIn:!1,token:""}},created(){S(D,t=>{t?this.loggedIn=!0:this.loggedIn=!1})(),j().then(t=>{this.token=t.data.access_token,this.refresh(this.$route.params.aid,!1)}).catch(t=>{console.log(t)})},methods:{refresh(e,t){F({token:this.token,id:e}).then(o=>{this.artist=o.data,this.genres="",o.data.genres.forEach(l=>{this.genres+=l+" - "}),G({token:this.token,id:e}).then(l=>{this.albums=l.data.items.sort(this.compareDates),t||v({token:this.token,id:e}).then(r=>{let i=0;do{if(i==20){v({token:this.token,id:r.data.artists[19].id}).then(a=>{i=0;do{if(i==20){this.mostRelated=a.data.artists[19];return}this.mostRelated=a.data.artists[i],i++}while(m(this.mostRelated))});return}this.mostRelated=r.data.artists[i],i++}while(m(this.mostRelated));b(this.mostRelated),V({token:this.token,limit:20,genres:o.data.genres,backup:this.lastSuggestedGenre}).then(a=>{console.log(a.data),this.lastSuggestedGenre=a.data.genre;let n=0;do this.leastRelated=a.data.artists[n],n++;while(m(this.leastRelated));b(this.leastRelated)}).catch(a=>{console.log(a)})}).catch(r=>{console.log(r)})}).catch(l=>{console.log(l)})}).catch(o=>{console.log(o)})},toggleLikeAlbum(e){this.toggleLike(e,"likedAlbums")},toggleLikeArtist(e){this.toggleLike(e,"likedArtists")},toggleLike(e,t){if(this.loggedIn){let o=f();if(o[t].find(l=>l.id==e.id)){o[t].splice(o[t].indexOf(e),1);let l=o[t];k({field:t,value:l}).catch(r=>{console.log(r)}),w(o),this.refresh(this.$route.params.aid,!0)}else{o[t].push(e);let l=o[t];k({field:t,value:l}).then(()=>{this.refresh(this.$route.params.aid,!0)}).catch(r=>{console.log(r)}),w(o)}}else console.log("Not Logged In")},isRepeat(e){let t=this.albums.indexOf(e);if(t==0)return!1;if(t!=-1){let o=this.albums[t-1];return e.name==o.name}},compareDates(e,t){let o=new Date(e.release_date),l=new Date(t.release_date);return o>l?-1:o>l?1:0},goToNewArtist(e){this.loggedIn&&k({field:"suggestedArtists",value:f().suggestedArtists}).catch(t=>{console.log(t)}),this.$router.push({name:"ArtistPage",params:{aid:e}}),this.refresh(e,!1)},isLikedAlbum(e){return this.checkLike(e,f().likedAlbums)},isLikedArtist(e){return this.checkLike(e,f().likedArtists)},checkLike(e,t){return this.loggedIn&&t.length>0?t.find(o=>o.id==e.id):!1}}},h=e=>(z("data-v-d16c75a7"),e=e(),M(),e),O={class:"px-4 py-5 text-center",style:{color:"white","background-color":"black"}},U={class:"display-5 fw-bold artistName",style:{"padding-top":"10%","font-size":"55px"}},E=h(()=>s("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"},null,-1)),H={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heartbreak-fill",viewBox:"0 0 16 16"},q=h(()=>s("path",{d:"M8.931.586 7 3l1.5 4-2 3L8 15C22.534 5.396 13.757-2.21 8.931.586ZM7.358.77 5.5 3 7 7l-1.5 3 1.815 4.537C-6.533 4.96 2.685-2.467 7.358.77Z"},null,-1)),J=[q],K={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},Q=h(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),W=[Q],X={class:"col-lg-6 mx-auto"},Y={class:"artistGenre"},tt={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},et=h(()=>s("br",null,null,-1)),st=h(()=>s("br",null,null,-1)),ot=h(()=>s("br",null,null,-1)),lt={style:{"background-color":"black"}},it={class:"row"},nt={key:0},at=["src"],rt=["onClick"],dt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heartbreak-fill",viewBox:"0 0 16 16"},ct=h(()=>s("path",{d:"M8.931.586 7 3l1.5 4-2 3L8 15C22.534 5.396 13.757-2.21 8.931.586ZM7.358.77 5.5 3 7 7l-1.5 3 1.815 4.537C-6.533 4.96 2.685-2.467 7.358.77Z"},null,-1)),ht=[ct],gt={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},ut=h(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),_t=[ut],ft={class:"col-2.5"},pt={style:{"font-size":"14px"}},mt={style:{"font-size":"12px"}};function kt(e,t,o,l,r,i){const a=N("router-link");return d(),c("section",O,[s("h1",U,[E,p(a,{type:"button",class:"fa fa-angle-double-left",style:{"font-size":"48px",color:"white","background-color":"black","text-decoration":"none","text-indent":"20px"},to:"/Search"}),P(g(this.artist.name),1)]),s("button",{onClick:t[0]||(t[0]=n=>i.toggleLikeArtist(this.artist)),type:"button",class:"btn btn-outline-danger",style:{position:"absolute",left:"72.5%"}},[i.isLikedArtist(this.artist)?(d(),c("svg",H,J)):(d(),c("svg",K,W))]),s("div",X,[s("p",Y,g(this.genres),1),s("div",tt,[s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[1]||(t[1]=n=>i.goToNewArtist(this.mostRelated.id))},"Related Artist: "+g(this.mostRelated.name),1),s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[2]||(t[2]=n=>i.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+g(this.leastRelated.name),1)])]),et,st,ot,s("ul",lt,[(d(!0),c(C,null,T(this.albums,n=>(d(),c("li",null,[s("div",it,[this.isRepeat(n)?$("",!0):(d(),c("div",nt,[s("img",{src:n.images[0].url,alt:"Album Cover"},null,8,at),s("button",{onClick:vt=>i.toggleLikeAlbum(n),type:"button",class:"btn btn-outline-danger",style:{position:"absolute"}},[i.isLikedAlbum(n)?(d(),c("svg",dt,ht)):(d(),c("svg",gt,_t))],8,rt)])),s("div",ft,[s("h1",pt,g(n.name),1),s("h3",mt,g(n.release_date),1)])])]))),256))])])}const R=B(Z,[["render",kt],["__scopeId","data-v-d16c75a7"]]),bt={class:"wrapper"},wt={name:"ArtistPage",components:{TheHeader:A,ArtistPageBody:R,TheFooter:y}},yt=Object.assign(wt,{setup(e){return(t,o)=>(d(),c(C,null,[s("header",null,[p(A),s("div",bt,[p(R)])]),s("main",null,[p(y)])],64))}});export{yt as default};
