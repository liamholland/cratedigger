import{g as L,a as I,h as g,b as A,d as S,r as p,u as b,e as f,s as w,T as x,f as y}from"./TheFooter-45d480bb.js";import{_ as B,r as T,o as d,a as c,b as s,d as m,f as N,t as _,F as R,i as z,g as P,p as D,h as $}from"./index-259201ba.js";const u=L(A),j=I(A),F=g(u,"getSpotifyToken"),G=g(u,"getArtist"),M=g(u,"getAlbums"),v=g(u,"getRelatedArtists"),V=g(u,"getUnrelatedArtists"),k=g(u,"updateProfile"),O=g(u,"broadcastToListeners"),U={data(){return{artist:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:"",loggedIn:!1,token:""}},created(){S(j,t=>{t?this.loggedIn=!0:this.loggedIn=!1})(),F().then(t=>{this.token=t.data.access_token,this.refresh(this.$route.params.aid,!1)}).catch(t=>{console.log(t)})},methods:{refresh(e,t){G({token:this.token,id:e}).then(o=>{this.artist=o.data,this.genres="",o.data.genres.forEach(n=>{this.genres+=n+" - "}),M({token:this.token,id:e}).then(n=>{this.albums=n.data.items.sort(this.compareDates),t||v({token:this.token,id:e}).then(r=>{let l=0;do{if(l==20){v({token:this.token,id:r.data.artists[19].id}).then(a=>{l=0;do{if(l==20){this.mostRelated=a.data.artists[19];return}this.mostRelated=a.data.artists[l],l++}while(p(this.mostRelated))});return}this.mostRelated=r.data.artists[l],l++}while(p(this.mostRelated));b(this.mostRelated),V({token:this.token,limit:20,genres:o.data.genres,backup:this.lastSuggestedGenre}).then(a=>{console.log(a.data),this.lastSuggestedGenre=a.data.genre;let i=0;do this.leastRelated=a.data.artists[i],i++;while(p(this.leastRelated));b(this.leastRelated)}).catch(a=>{console.log(a)})}).catch(r=>{console.log(r)})}).catch(n=>{console.log(n)})}).catch(o=>{console.log(o)})},toggleLikeAlbum(e){this.toggleLike(e,"likedAlbums")},toggleLikeArtist(e){this.toggleLike(e,"likedArtists")},toggleLike(e,t){if(this.loggedIn){let o=f();if(o[t].find(n=>n.id==e.id)){o[t].splice(o[t].indexOf(e),1);let n=o[t];k({field:t,value:n}).catch(r=>{console.log(r)}),w(o),this.refresh(this.$route.params.aid,!0)}else{o[t].push(e);let n=o[t];k({field:t,value:n}).then(()=>{this.refresh(this.$route.params.aid,!0)}).catch(r=>{console.log(r)}),w(o)}}else console.log("Not Logged In")},isRepeat(e){let t=this.albums.indexOf(e);if(t==0)return!1;if(t!=-1){let o=this.albums[t-1];return e.name==o.name}},compareDates(e,t){let o=new Date(e.release_date),n=new Date(t.release_date);return o>n?-1:o>n?1:0},goToNewArtist(e){this.loggedIn&&k({field:"suggestedArtists",value:f().suggestedArtists}).catch(t=>{console.log(t)}),this.$router.push({name:"ArtistPage",params:{aid:e}}),this.refresh(e,!1)},isLikedAlbum(e){return this.checkLike(e,f().likedAlbums)},isLikedArtist(e){return this.checkLike(e,f().likedArtists)},checkLike(e,t){return this.loggedIn&&t.length>0?t.find(o=>o.id==e.id):!1},recommendArtist(){this.loggedIn?O({artist:this.artist}).then(e=>{console.log(e.data)}).catch(e=>{console.log(e)}):console.log("Not Logged In")}}},h=e=>(D("data-v-ea95a447"),e=e(),$(),e),E={class:"px-4 py-5 text-center",style:{color:"white","background-color":"black"}},H={class:"display-5 fw-bold artistName",style:{"padding-top":"10%","font-size":"55px"}},q=h(()=>s("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"},null,-1)),J={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"1DB954"}},K=h(()=>s("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),Q=[K],W={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"white","font-size":"48px"}},X=h(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),Y=[X],Z={class:"col-lg-6 mx-auto"},tt={class:"artistGenre"},et={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},st=h(()=>s("br",null,null,-1)),ot=h(()=>s("br",null,null,-1)),lt=h(()=>s("br",null,null,-1)),nt={style:{"background-color":"black"}},it={class:"row"},at={key:0},rt=["src"],dt=["onClick"],ct={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"1DB954"}},ht=h(()=>s("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),gt=[ht],ut={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"white"}},_t=h(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),ft=[_t],mt={class:"col-2.5"},pt={style:{"font-size":"14px"}},kt={style:{"font-size":"12px"}};function bt(e,t,o,n,r,l){const a=T("router-link");return d(),c("section",E,[s("h1",H,[q,m(a,{type:"button",class:"fa fa-angle-double-left",style:{"font-size":"48px",color:"white","background-color":"black","text-decoration":"none","text-indent":"20px"},to:"/Search"}),N(" "+_(this.artist.name)+" ",1),s("button",{onClick:t[0]||(t[0]=i=>l.toggleLikeArtist(this.artist)),type:"button",class:"btn btn",style:{"border-color":"black"}},[l.isLikedArtist(this.artist)?(d(),c("svg",J,Q)):(d(),c("svg",W,Y))]),s("button",{onClick:t[1]||(t[1]=(...i)=>l.recommendArtist&&l.recommendArtist(...i)),type:"button",class:"btn btn",style:{"border-color":"black"}},"Recommended To Listeners")]),s("div",Z,[s("p",tt,_(this.genres),1),s("div",et,[s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[2]||(t[2]=i=>l.goToNewArtist(this.mostRelated.id))},"Related Artist: "+_(this.mostRelated.name),1),s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[3]||(t[3]=i=>l.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+_(this.leastRelated.name),1)])]),st,ot,lt,s("ul",nt,[(d(!0),c(R,null,z(this.albums,i=>(d(),c("li",null,[s("div",it,[this.isRepeat(i)?P("",!0):(d(),c("div",at,[s("img",{src:i.images[0].url,alt:"Album Cover"},null,8,rt),s("button",{onClick:At=>l.toggleLikeAlbum(i),type:"button",class:"btn btn",style:{position:"absolute"}},[l.isLikedAlbum(i)?(d(),c("svg",ct,gt)):(d(),c("svg",ut,ft))],8,dt)])),s("div",mt,[s("h1",pt,_(i.name),1),s("h3",kt,_(i.release_date),1)])])]))),256))])])}const C=B(U,[["render",bt],["__scopeId","data-v-ea95a447"]]),wt={class:"wrapper"},vt={name:"ArtistPage",components:{TheHeader:x,ArtistPageBody:C,TheFooter:y}},Rt=Object.assign(vt,{setup(e){return(t,o)=>(d(),c(R,null,[s("header",null,[m(x),s("div",wt,[m(C)])]),s("main",null,[m(y)])],64))}});export{Rt as default};
