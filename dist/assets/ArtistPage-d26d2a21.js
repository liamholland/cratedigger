import{g as S,h as u,b as B,r as p,u as v,i as m,e as f,s as A,T as R,f as L}from"./TheFooter-2fd6c9df.js";import{_ as P,o as d,c,a as o,t as g,F as y,i as N,h as T,p as $,e as I,f as k}from"./index-794929be.js";const _=S(B),M=u(_,"getSpotifyToken"),z=u(_,"getArtist"),D=u(_,"getAlbums"),x=u(_,"getRelatedArtists"),F=u(_,"getUnrelatedArtists"),b=u(_,"updateProfile"),G={data(){return{artist:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:""}},created(){this.refresh(this.$route.params.aid,!1)},methods:{refresh(t,e){M().then(s=>{z({token:s.data.access_token,id:t}).then(l=>{this.artist=l.data,this.genres="",l.data.genres.forEach(n=>{this.genres+=n+" - "}),D({token:s.data.access_token,id:t}).then(n=>{this.albums=n.data.items.sort(this.compareDates),e||x({token:s.data.access_token,id:t}).then(a=>{let i=0;do{if(i==20){x({token:s.data.access_token,id:a.data.artists[19].id}).then(r=>{i=0;do{if(i==20){this.mostRelated=r.data.artists[19];return}this.mostRelated=r.data.artists[i],i++}while(p(this.mostRelated))});return}this.mostRelated=a.data.artists[i],i++}while(p(this.mostRelated));v(this.mostRelated),F({token:s.data.access_token,limit:20,genres:l.data.genres,backup:this.lastSuggestedGenre}).then(r=>{console.log(r.data),this.lastSuggestedGenre=r.data.genre;let w=0;do this.leastRelated=r.data.artists[w],w++;while(p(this.leastRelated));v(this.leastRelated)}).catch(r=>{console.log(r)})}).catch(a=>{console.log(a)})}).catch(n=>{console.log(n)})}).catch(l=>{console.log(l)})}).catch(s=>{console.log(s)})},toggleLikeAlbum(t){this.toggleLike(t,"likedAlbums")},toggleLikeArtist(t){this.toggleLike(t,"likedArtists")},toggleLike(t,e){if(m()){let s=f();if(s[e].find(l=>l.id==t.id)){s[e].splice(s[e].indexOf(t),1);let l=s[e];b({field:e,value:l}).then(()=>{this.refresh(this.$route.params.aid,!0)}).catch(n=>{console.log(n)}),A(s)}else{s[e].push(t);let l=s[e];b({field:e,value:l}).then(()=>{this.refresh(this.$route.params.aid,!0)}).catch(n=>{console.log(n)}),A(s)}}else console.log("Not Logged In")},isRepeat(t){let e=this.albums.indexOf(t);if(e==0)return!1;if(e!=-1){let s=this.albums[e-1];return t.name==s.name}},compareDates(t,e){let s=new Date(t.release_date),l=new Date(e.release_date);return s>l?-1:s>l?1:0},goToNewArtist(t){m()&&b({field:"suggestedArtists",value:f().suggestedArtists}).catch(e=>{console.log(e)}),this.$router.push({name:"ArtistPage",params:{aid:t}}),this.refresh(t,!1)},isLikedAlbum(t){return this.checkLike(t,f().likedAlbums)},isLikedArtist(t){return this.checkLike(t,f().likedArtists)},checkLike(t,e){return m()&&e.length>0?e.find(s=>s.id==t.id):!1}}},h=t=>($("data-v-e90a5661"),t=t(),I(),t),Z={class:"px-4 py-5 text-center",style:{color:"white","background-color":"black"}},O={class:"display-5 fw-bold artistName",style:{"padding-top":"10%","font-size":"55px"}},U={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heartbreak-fill",viewBox:"0 0 16 16"},V=h(()=>o("path",{d:"M8.931.586 7 3l1.5 4-2 3L8 15C22.534 5.396 13.757-2.21 8.931.586ZM7.358.77 5.5 3 7 7l-1.5 3 1.815 4.537C-6.533 4.96 2.685-2.467 7.358.77Z"},null,-1)),j=[V],E={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},H=h(()=>o("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),q=[H],J={class:"col-lg-6 mx-auto"},K={class:"artistGenre"},Q={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},W=h(()=>o("br",null,null,-1)),X=h(()=>o("br",null,null,-1)),Y=h(()=>o("br",null,null,-1)),tt={style:{"background-color":"black"}},et={class:"row"},st={key:0},ot=["src"],it=["onClick"],lt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heartbreak-fill",viewBox:"0 0 16 16"},at=h(()=>o("path",{d:"M8.931.586 7 3l1.5 4-2 3L8 15C22.534 5.396 13.757-2.21 8.931.586ZM7.358.77 5.5 3 7 7l-1.5 3 1.815 4.537C-6.533 4.96 2.685-2.467 7.358.77Z"},null,-1)),nt=[at],rt={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},dt=h(()=>o("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),ct=[dt],ht={class:"col-2.5"},gt={style:{"font-size":"14px"}},ut={style:{"font-size":"12px"}};function _t(t,e,s,l,n,a){return d(),c("section",Z,[o("h1",O,g(this.artist.name),1),o("button",{onClick:e[0]||(e[0]=i=>a.toggleLikeArtist(this.artist)),type:"button",class:"btn btn-outline-danger",style:{position:"absolute",left:"72.5%"}},[a.isLikedArtist(this.artist)?(d(),c("svg",U,j)):(d(),c("svg",E,q))]),o("div",J,[o("p",K,g(this.genres),1),o("div",Q,[o("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:e[1]||(e[1]=i=>a.goToNewArtist(this.mostRelated.id))},"Related Artist: "+g(this.mostRelated.name),1),o("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:e[2]||(e[2]=i=>a.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+g(this.leastRelated.name),1)])]),W,X,Y,o("ul",tt,[(d(!0),c(y,null,N(this.albums,i=>(d(),c("li",null,[o("div",et,[this.isRepeat(i)?T("",!0):(d(),c("div",st,[o("img",{src:i.images[0].url,alt:"Album Cover"},null,8,ot),o("button",{onClick:r=>a.toggleLikeAlbum(i),type:"button",class:"btn btn-outline-danger",style:{position:"absolute"}},[a.isLikedAlbum(i)?(d(),c("svg",lt,nt)):(d(),c("svg",rt,ct))],8,it)])),o("div",ht,[o("h1",gt,g(i.name),1),o("h3",ut,g(i.release_date),1)])])]))),256))])])}const C=P(G,[["render",_t],["__scopeId","data-v-e90a5661"]]),ft={class:"wrapper"},pt={name:"ArtistPage",components:{TheHeader:R,ArtistPageBody:C,TheFooter:L}},bt=Object.assign(pt,{setup(t){return(e,s)=>(d(),c(y,null,[o("header",null,[k(R),o("div",ft,[k(C)])]),o("main",null,[k(L)])],64))}});export{bt as default};
