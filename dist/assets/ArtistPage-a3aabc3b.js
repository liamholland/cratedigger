import{g as L,a as I,h as u,b as x,d as S,r as b,u as w,e as f,s as v,T as C,f as R}from"./TheFooter-87975b25.js";import{_ as B,r as N,o as d,c as h,f as p,g as P,b as T,a as s,t as g,F as m,i as $,h as M,p as z,e as D}from"./index-03d69787.js";const _=L(x),F=I(x),G=u(_,"getSpotifyToken"),V=u(_,"getArtist"),Z=u(_,"getAlbums"),A=u(_,"getRelatedArtists"),O=u(_,"getUnrelatedArtists"),k=u(_,"updateProfile"),U={data(){return{artist:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:"",loggedIn:!1,token:""}},created(){S(F,t=>{t?this.loggedIn=!0:this.loggedIn=!1})(),G().then(t=>{this.token=t.data.access_token,this.refresh(this.$route.params.aid,!1)}).catch(t=>{console.log(t)})},methods:{refresh(e,t){V({token:this.token,id:e}).then(o=>{this.artist=o.data,this.genres="",o.data.genres.forEach(l=>{this.genres+=l+" - "}),Z({token:this.token,id:e}).then(l=>{this.albums=l.data.items.sort(this.compareDates),t||A({token:this.token,id:e}).then(r=>{let i=0;do{if(i==20){A({token:this.token,id:r.data.artists[19].id}).then(a=>{i=0;do{if(i==20){this.mostRelated=a.data.artists[19];return}this.mostRelated=a.data.artists[i],i++}while(b(this.mostRelated))});return}this.mostRelated=r.data.artists[i],i++}while(b(this.mostRelated));w(this.mostRelated),O({token:this.token,limit:20,genres:o.data.genres,backup:this.lastSuggestedGenre}).then(a=>{console.log(a.data),this.lastSuggestedGenre=a.data.genre;let n=0;do this.leastRelated=a.data.artists[n],n++;while(b(this.leastRelated));w(this.leastRelated)}).catch(a=>{console.log(a)})}).catch(r=>{console.log(r)})}).catch(l=>{console.log(l)})}).catch(o=>{console.log(o)})},toggleLikeAlbum(e){this.toggleLike(e,"likedAlbums")},toggleLikeArtist(e){this.toggleLike(e,"likedArtists")},toggleLike(e,t){if(this.loggedIn){let o=f();if(o[t].find(l=>l.id==e.id)){o[t].splice(o[t].indexOf(e),1);let l=o[t];k({field:t,value:l}).catch(r=>{console.log(r)}),v(o),this.refresh(this.$route.params.aid,!0)}else{o[t].push(e);let l=o[t];k({field:t,value:l}).then(()=>{this.refresh(this.$route.params.aid,!0)}).catch(r=>{console.log(r)}),v(o)}}else console.log("Not Logged In")},isRepeat(e){let t=this.albums.indexOf(e);if(t==0)return!1;if(t!=-1){let o=this.albums[t-1];return e.name==o.name}},compareDates(e,t){let o=new Date(e.release_date),l=new Date(t.release_date);return o>l?-1:o>l?1:0},goToNewArtist(e){this.loggedIn&&k({field:"suggestedArtists",value:f().suggestedArtists}).catch(t=>{console.log(t)}),this.$router.push({name:"ArtistPage",params:{aid:e}}),this.refresh(e,!1)},isLikedAlbum(e){return this.checkLike(e,f().likedAlbums)},isLikedArtist(e){return this.checkLike(e,f().likedArtists)},checkLike(e,t){return this.loggedIn&&t.length>0?t.find(o=>o.id==e.id):!1}}},c=e=>(z("data-v-00b4818f"),e=e(),D(),e),j={class:"px-4 py-5 text-center",style:{color:"white","background-color":"black"}},E={class:"display-5 fw-bold artistName",style:{"padding-top":"10%","font-size":"55px"}},H={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heartbreak-fill",viewBox:"0 0 16 16"},q=c(()=>s("path",{d:"M8.931.586 7 3l1.5 4-2 3L8 15C22.534 5.396 13.757-2.21 8.931.586ZM7.358.77 5.5 3 7 7l-1.5 3 1.815 4.537C-6.533 4.96 2.685-2.467 7.358.77Z"},null,-1)),J=[q],K={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},Q=c(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),W=[Q],X={class:"col-lg-6 mx-auto"},Y={class:"artistGenre"},tt={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},et=c(()=>s("br",null,null,-1)),st=c(()=>s("br",null,null,-1)),ot=c(()=>s("br",null,null,-1)),lt={style:{"background-color":"black"}},it={class:"row"},nt={key:0},at=["src"],rt=["onClick"],dt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heartbreak-fill",viewBox:"0 0 16 16"},ht=c(()=>s("path",{d:"M8.931.586 7 3l1.5 4-2 3L8 15C22.534 5.396 13.757-2.21 8.931.586ZM7.358.77 5.5 3 7 7l-1.5 3 1.815 4.537C-6.533 4.96 2.685-2.467 7.358.77Z"},null,-1)),ct=[ht],gt={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},ut=c(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),_t=[ut],ft={class:"col-2.5"},pt={style:{"font-size":"14px"}},bt={style:{"font-size":"12px"}};function kt(e,t,o,l,r,i){const a=N("router-link");return d(),h(m,null,[p(a,{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",to:"/Search"},{default:P(()=>[T("Back")]),_:1}),s("section",j,[s("h1",E,g(this.artist.name),1),s("button",{onClick:t[0]||(t[0]=n=>i.toggleLikeArtist(this.artist)),type:"button",class:"btn btn-outline-danger",style:{position:"absolute",left:"72.5%"}},[i.isLikedArtist(this.artist)?(d(),h("svg",H,J)):(d(),h("svg",K,W))]),s("div",X,[s("p",Y,g(this.genres),1),s("div",tt,[s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[1]||(t[1]=n=>i.goToNewArtist(this.mostRelated.id))},"Related Artist: "+g(this.mostRelated.name),1),s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[2]||(t[2]=n=>i.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+g(this.leastRelated.name),1)])]),et,st,ot,s("ul",lt,[(d(!0),h(m,null,$(this.albums,n=>(d(),h("li",null,[s("div",it,[this.isRepeat(n)?M("",!0):(d(),h("div",nt,[s("img",{src:n.images[0].url,alt:"Album Cover"},null,8,at),s("button",{onClick:vt=>i.toggleLikeAlbum(n),type:"button",class:"btn btn-outline-danger",style:{position:"absolute"}},[i.isLikedAlbum(n)?(d(),h("svg",dt,ct)):(d(),h("svg",gt,_t))],8,rt)])),s("div",ft,[s("h1",pt,g(n.name),1),s("h3",bt,g(n.release_date),1)])])]))),256))])])],64)}const y=B(U,[["render",kt],["__scopeId","data-v-00b4818f"]]),mt={class:"wrapper"},wt={name:"ArtistPage",components:{TheHeader:C,ArtistPageBody:y,TheFooter:R}},Ct=Object.assign(wt,{setup(e){return(t,o)=>(d(),h(m,null,[s("header",null,[p(C),s("div",mt,[p(y)])]),s("main",null,[p(R)])],64))}});export{Ct as default};
