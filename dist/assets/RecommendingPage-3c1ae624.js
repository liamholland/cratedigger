import{g as x,a as A,h as d,b as k,i as u,j as I,e as a,r as w,k as R,u as h,o as p,s as T,T as y,f as b}from"./TheFooter-61bfac21.js";import{_ as C,o as l,c,a as t,t as f,b as _,p as B,e as F,f as r,F as N}from"./index-be72c2c2.js";const g=x(k);A(k);const P=d(g,"getSpotifyToken"),j=d(g,"recommendArtists"),m=d(g,"updateProfile"),z={data(){return{token:"",currentSuggestion:{},loggedIn:!1,genres:"",loading:!1}},beforeCreate(){u()?(this.loggedIn=!0,P().then(e=>{this.token=e.data.access_token,this.refreshRecommendation()}).catch(e=>{console.log(e)})):this.loggedIn=!1},mounted(){this.loggedIn=u()},methods:{refreshRecommendation(){this.loading||(I(this),this.loading=!0),j({token:this.token,user:a()}).then(e=>{console.log(e.data),w(e.data.artist)?this.refreshRecommendation():(this.currentSuggestion=e.data.artist,this.genres="",this.currentSuggestion.genres.forEach(s=>{this.genres+=s+" , "}),R(),this.loading=!1)})},likeArtist(){if(this.currentSuggestion!=null){let e=a();console.log(e),e.likedArtists.push(this.currentSuggestion);let s=e.likedArtists;T(e),h(this.currentSuggestion),s!==null&&m({field:"likedArtists",value:s}).then(n=>{console.log(n.data),this.refreshRecommendation()}).catch(n=>{console.log(n)})}},skipArtist(){if(this.currentSuggestion!=null){h(this.currentSuggestion);let e=a().suggestedArtists;e!==null&&m({field:"suggestedArtists",value:e}).then(s=>{console.log(s.data),this.refreshRecommendation()}).catch(s=>{console.log(s)})}},opensignin(){p(0)},opensignup(){p(1)}},computed:{artistImage(){return JSON.stringify(this.currentSuggestion)!="{}"?this.currentSuggestion.images[0].url:""}}},D=e=>(B("data-v-2dccaff0"),e=e(),F(),e),L={key:0},O={class:"px-4 py-5 text-center",style:{width:"100vw",height:"100vh",color:"white","background-color":"black"}},V={class:"display-5 fw-bold",style:{"padding-top":"10%"}},E={class:"col-lg-6 mx-auto"},H={class:"lead mb-4"},G={class:"container px-1"},J=["src","alt"],M={key:1},Y={class:"px-4 py-5 text-center",style:{width:"100vw",height:"100vh",color:"white","background-color":"black"}},q={class:"col-lg-6 mx-auto",style:{"padding-top":"10%"}},K={class:"lead mb-4",style:{color:"white"}},Q={style:{display:"inline"}},U={style:{display:"inline"}},W=D(()=>t("div",{class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},null,-1));function X(e,s,n,ee,v,o){return v.loggedIn?(l(),c("div",L,[t("section",O,[t("h1",V,"Artist: "+f(this.currentSuggestion.name),1),t("div",E,[t("p",H,"Genres: "+f(this.genres),1),t("div",G,[t("button",{style:{"background-color":"black","padding-left":"15px",border:"none","font-size":"150%"},onClick:s[0]||(s[0]=(...i)=>o.skipArtist&&o.skipArtist(...i))},"❌"),t("img",{src:o.artistImage,alt:this.currentSuggestion.name,class:"img-fluid rounded-3",width:"180",height:"180",loading:"lazy"},null,8,J),t("button",{style:{"background-color":"black","padding-right":"15px",border:"none","font-size":"150%"},onClick:s[1]||(s[1]=(...i)=>o.likeArtist&&o.likeArtist(...i))},"✅")])])])])):(l(),c("div",M,[t("section",Y,[t("div",q,[t("h4",K,[_("You are not logged into your account. To login click "),t("h3",Q,[t("strong",null,[t("a",{onClick:s[2]||(s[2]=i=>o.opensignin())},"here")])]),_(" or to create an account click "),t("h3",U,[t("strong",null,[t("a",{onClick:s[3]||(s[3]=i=>o.opensignup())},"here")])])]),W])])]))}const S=C(z,[["render",X],["__scopeId","data-v-2dccaff0"]]),Z={class:"wrapper"},$={name:"HomeOne",components:{TheHeader:y,Recommender:S,TheFooter:b}},oe=Object.assign($,{setup(e){return(s,n)=>(l(),c(N,null,[t("header",null,[r(y),t("div",Z,[r(S)])]),t("main",null,[r(b)])],64))}});export{oe as default};
