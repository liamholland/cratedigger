import{g as b,a as v,h as g,b as p,i as h,e as i,r as y,u as _,s as R,T as k,f as S}from"./TheFooter-d6d6d440.js";import{_ as x,o as c,c as l,a as s,t as f,p as N,e as T,f as a,F as w}from"./index-32e6be95.js";const d=b(p);v(p);const B=g(d,"getSpotifyToken"),C=g(d,"recommendArtists"),m=g(d,"updateProfile"),D={data(){return{token:"",currentSuggestion:{},loggedIn:!1,genres:""}},beforeCreate(){h()?(this.loggedIn=!0,B().then(e=>{this.token=e.data.access_token,this.refreshRecommendation()}).catch(e=>{console.log(e)})):this.loggedIn=!1},mounted(){this.loggedIn=h()},methods:{refreshRecommendation(){C({token:this.token,user:i()}).then(e=>{console.log(e.data),y(e.data.artist)?this.refreshRecommendation():(this.currentSuggestion=e.data.artist,this.genres="",this.currentSuggestion.genres.forEach(t=>{this.genres+=t+" , "}))})},likeArtist(){if(this.currentSuggestion!=null){let e=i();console.log(e),e.likedArtists.push(this.currentSuggestion);let t=e.likedArtists;R(e),_(this.currentSuggestion),m({field:"likedArtists",value:t}).then(n=>{console.log(n.data),this.refreshRecommendation()}).catch(n=>{console.log(n)})}},skipArtist(){if(this.currentSuggestion!=null){_(this.currentSuggestion);let e=i().suggestedArtists;m({field:"suggestedArtists",value:e}).then(t=>{console.log(t.data),this.refreshRecommendation()}).catch(t=>{console.log(t)})}}},computed:{artistImage(){return JSON.stringify(this.currentSuggestion)!="{}"?this.currentSuggestion.images[0].url:""}}},u=e=>(N("data-v-831893b9"),e=e(),T(),e),F={key:0},L=u(()=>s("meta",{charset:"utf-8"},null,-1)),P={class:"hero"},O={class:"artistName"},E=u(()=>s("br",null,null,-1)),H={class:"artistGenre"},V={id:"hero",class:"hero"},j=["src","alt"],G={key:1},J=u(()=>s("p",null,"Not Logged In",-1)),q=[J];function z(e,t,n,Q,A,o){return A.loggedIn?(c(),l("div",F,[L,s("section",P,[s("p",O,f(this.currentSuggestion.name),1),E,s("p",H,f(this.genres),1)]),s("section",V,[s("button",{onClick:t[0]||(t[0]=(...r)=>o.likeArtist&&o.likeArtist(...r)),class:"btn-get-started"},"Like"),s("img",{src:o.artistImage,alt:this.currentSuggestion.name},null,8,j),s("button",{onClick:t[1]||(t[1]=(...r)=>o.skipArtist&&o.skipArtist(...r)),class:"btn-get-started"},"Don't Like")])])):(c(),l("div",G,q))}const I=x(D,[["render",z],["__scopeId","data-v-831893b9"]]),K={class:"wrapper"},M={name:"HomeOne",components:{TheHeader:k,Recommender:I,TheFooter:S}},X=Object.assign(M,{setup(e){return(t,n)=>(c(),l(w,null,[s("header",null,[a(k),s("div",K,[a(I)])]),s("main",null,[a(S)])],64))}});export{X as default};
