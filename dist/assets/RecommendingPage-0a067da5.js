import{g as b,a as v,h as d,b as p,i as h,j as y,e as r,r as R,k as L,u as _,s as x,T as k,f as S}from"./TheFooter-20b67b9a.js";import{_ as N,o as c,a as l,b as s,t as f,p as T,h as w,d as a,F as B}from"./index-49b34539.js";const g=b(p);v(p);const C=d(g,"getSpotifyToken"),D=d(g,"recommendArtists"),m=d(g,"updateProfile"),F={data(){return{token:"",currentSuggestion:{},loggedIn:!1,genres:"",loading:!1}},beforeCreate(){h()?(this.loggedIn=!0,C().then(e=>{this.token=e.data.access_token,this.refreshRecommendation()}).catch(e=>{console.log(e)})):this.loggedIn=!1},mounted(){this.loggedIn=h()},methods:{refreshRecommendation(){this.loading||(y(this),this.loading=!0),D({token:this.token,user:r()}).then(e=>{console.log(e.data),R(e.data.artist)?this.refreshRecommendation():(this.currentSuggestion=e.data.artist,this.genres="",this.currentSuggestion.genres.forEach(t=>{this.genres+=t+" , "}),L(),this.loading=!1)})},likeArtist(){if(this.currentSuggestion!=null){let e=r();console.log(e),e.likedArtists.push(this.currentSuggestion);let t=e.likedArtists;x(e),_(this.currentSuggestion),t!==null&&m({field:"likedArtists",value:t}).then(n=>{console.log(n.data),this.refreshRecommendation()}).catch(n=>{console.log(n)})}},skipArtist(){if(this.currentSuggestion!=null){_(this.currentSuggestion);let e=r().suggestedArtists;e!==null&&m({field:"suggestedArtists",value:e}).then(t=>{console.log(t.data),this.refreshRecommendation()}).catch(t=>{console.log(t)})}}},computed:{artistImage(){return JSON.stringify(this.currentSuggestion)!="{}"?this.currentSuggestion.images[0].url:""}}},u=e=>(T("data-v-577f1dc6"),e=e(),w(),e),P={key:0},O=u(()=>s("meta",{charset:"utf-8"},null,-1)),j={class:"hero"},E={class:"artistName"},H=u(()=>s("br",null,null,-1)),V={class:"artistGenre"},G={id:"hero",class:"hero"},J=["src","alt"],q={key:1},z=u(()=>s("p",null,"Not Logged In",-1)),K=[z];function M(e,t,n,W,A,o){return A.loggedIn?(c(),l("div",P,[O,s("section",j,[s("p",E,f(this.currentSuggestion.name),1),H,s("p",V,f(this.genres),1)]),s("section",G,[s("button",{onClick:t[0]||(t[0]=(...i)=>o.likeArtist&&o.likeArtist(...i)),class:"btn-get-started"},"Like"),s("img",{src:o.artistImage,alt:this.currentSuggestion.name},null,8,J),s("button",{onClick:t[1]||(t[1]=(...i)=>o.skipArtist&&o.skipArtist(...i)),class:"btn-get-started"},"Don't Like")])])):(c(),l("div",q,K))}const I=N(F,[["render",M],["__scopeId","data-v-577f1dc6"]]),Q={class:"wrapper"},U={name:"HomeOne",components:{TheHeader:k,Recommender:I,TheFooter:S}},Z=Object.assign(U,{setup(e){return(t,n)=>(c(),l(B,null,[s("header",null,[a(k),s("div",Q,[a(I)])]),s("main",null,[a(S)])],64))}});export{Z as default};
