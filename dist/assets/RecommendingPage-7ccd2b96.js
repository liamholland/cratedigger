import{g as v,a as y,h as g,b as k,i as h,e as i,r as R,u as _,j as f,s as x,T as S,f as I}from"./TheFooter-d9436c99.js";import{_ as D,o as c,c as l,a as s,t as m,p as N,e as T,f as a,F as w}from"./index-e45f4c5d.js";const d=v(k);y(k);const B=g(d,"getSpotifyToken"),C=g(d,"recommendArtists"),p=g(d,"updateProfile"),F={data(){return{token:"",currentSuggestion:{},loggedIn:!1,genres:""}},beforeCreate(){h()?(this.loggedIn=!0,B().then(e=>{this.token=e.data.access_token,this.refreshRecommendation()}).catch(e=>{console.log(e)})):this.loggedIn=!1},mounted(){this.loggedIn=h()},methods:{refreshRecommendation(){C({token:this.token,user:i()}).then(e=>{console.log(e.data),R(e.data.artist)?this.refreshRecommendation():(this.currentSuggestion=e.data.artist,this.genres="",this.currentSuggestion.genres.forEach(t=>{this.genres+=t+" , "}))})},likeArtist(){if(this.currentSuggestion!=null){let e=i();console.log(e),e.likedArtists.push(this.currentSuggestion);let t=e.likedArtists;x(e),_(this.currentSuggestion),p({id:f(),field:"likedArtists",value:t}).then(n=>{console.log(n.data),this.refreshRecommendation()}).catch(n=>{console.log(n)})}},skipArtist(){if(this.currentSuggestion!=null){_(this.currentSuggestion);let e=i().suggestedArtists;p({id:f(),field:"suggestedArtists",value:e}).then(t=>{console.log(t.data),this.refreshRecommendation()}).catch(t=>{console.log(t)})}}},computed:{artistImage(){return JSON.stringify(this.currentSuggestion)!="{}"?this.currentSuggestion.images[0].url:""}}},u=e=>(N("data-v-b4947aab"),e=e(),T(),e),L={key:0},P=u(()=>s("meta",{charset:"utf-8"},null,-1)),O={class:"hero"},j={class:"artistName"},E=u(()=>s("br",null,null,-1)),H={class:"artistGenre"},V={id:"hero",class:"hero"},G=["src","alt"],J={key:1},U=u(()=>s("p",null,"Not Logged In",-1)),q=[U];function z(e,t,n,Q,A,o){return A.loggedIn?(c(),l("div",L,[P,s("section",O,[s("p",j,m(this.currentSuggestion.name),1),E,s("p",H,m(this.genres),1)]),s("section",V,[s("button",{onClick:t[0]||(t[0]=(...r)=>o.likeArtist&&o.likeArtist(...r)),class:"btn-get-started"},"Like"),s("img",{src:o.artistImage,alt:this.currentSuggestion.name},null,8,G),s("button",{onClick:t[1]||(t[1]=(...r)=>o.skipArtist&&o.skipArtist(...r)),class:"btn-get-started"},"Don't Like")])])):(c(),l("div",J,q))}const b=D(F,[["render",z],["__scopeId","data-v-b4947aab"]]),K={class:"wrapper"},M={name:"HomeOne",components:{TheHeader:S,Recommender:b,TheFooter:I}},Y=Object.assign(M,{setup(e){return(t,n)=>(c(),l(w,null,[s("header",null,[a(S),s("div",K,[a(b)])]),s("main",null,[a(I)])],64))}});export{Y as default};
