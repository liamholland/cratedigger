import{g as v,b as y,h as d,c as k,i as h,k as i,r as R,u as _,m as p,j as x,T as S,a as I}from"./TheFooter-ed33e514.js";import{_ as D,o as c,c as l,b as s,t as f,p as T,h as w,d as a,F as B}from"./index-49e1ebc2.js";const g=v(k);y(k);const C=d(g,"getSpotifyToken"),F=d(g,"recommendArtists"),m=d(g,"updateProfile"),L={data(){return{token:"",currentSuggestion:{},loggedIn:!1,genres:""}},beforeCreate(){h()?(this.loggedIn=!0,C().then(e=>{this.token=e.data.access_token,this.refreshRecommendation()}).catch(e=>{console.log(e)})):this.loggedIn=!1},mounted(){this.loggedIn=h()},methods:{refreshRecommendation(){F({token:this.token,user:i()}).then(e=>{console.log(e.data),R(e.data.artist)?this.refreshRecommendation():(this.currentSuggestion=e.data.artist,this.genres="",this.currentSuggestion.genres.forEach(t=>{this.genres+=t+" , "}))})},likeArtist(){let e=i();console.log(e),e.likedArtists.push(this.currentSuggestion);let t=e.likeArtists;x(e),_(this.currentSuggestion),m({id:p(),field:"likedArtists",value:t}).then(o=>{console.log(o.data),this.refreshRecommendation()}).catch(o=>{console.log(o)})},skipArtist(){_(this.currentSuggestion);let e=i().suggestedArtists;m({id:p(),field:"suggestedArtists",value:e}).then(t=>{console.log(t.data),this.refreshRecommendation()}).catch(t=>{console.log(t)})}}},u=e=>(T("data-v-cdf2e108"),e=e(),w(),e),N={key:0},P=u(()=>s("meta",{charset:"utf-8"},null,-1)),j={class:"hero"},E={class:"artistName"},H=u(()=>s("br",null,null,-1)),O={class:"artistGenre"},V={id:"hero",class:"hero"},G=["src","alt"],U={key:1},$=u(()=>s("p",null,"Not Logged In",-1)),q=[$];function z(e,t,o,M,b,n){return b.loggedIn?(c(),l("div",N,[P,s("section",j,[s("p",E,f(this.currentSuggestion.name),1),H,s("p",O,f(this.genres),1)]),s("section",V,[s("button",{onClick:t[0]||(t[0]=(...r)=>n.likeArtist&&n.likeArtist(...r)),class:"btn-get-started"},"Like"),s("img",{src:this.currentSuggestion.images[0].url,alt:this.currentSuggestion.name},null,8,G),s("button",{onClick:t[1]||(t[1]=(...r)=>n.skipArtist&&n.skipArtist(...r)),class:"btn-get-started"},"Don't Like")])])):(c(),l("div",U,q))}const A=D(L,[["render",z],["__scopeId","data-v-cdf2e108"]]),J={class:"wrapper"},K={name:"HomeOne",components:{TheHeader:S,Recommender:A,TheFooter:I}},X=Object.assign(K,{setup(e){return(t,o)=>(c(),l(B,null,[s("header",null,[a(S),s("div",J,[a(A)])]),s("main",null,[a(I)])],64))}});export{X as default};
