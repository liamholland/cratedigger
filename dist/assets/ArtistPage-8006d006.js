import{g as k,h,c as v,r as A,u as w,T as p,a as g}from"./TheFooter-1b93a497.js";import{_ as y,o as c,c as d,b as t,t as u,F as f,i as R,g as x,p as N,h as $,d as m}from"./index-2d47d71a.js";const _=k(v),S=h(_,"getSpotifyToken"),T=h(_,"getArtist"),B=h(_,"getAlbums"),C=h(_,"getRelatedArtists"),F={data(){return{artistName:"",albums:[],mostRelated:""}},created(){this.refresh(this.$route.params.aid)},methods:{refresh(e){S().then(s=>{T({token:s.data.access_token,id:e}).then(a=>{this.artistName=a.data.name,B({token:s.data.access_token,id:e}).then(o=>{this.albums=o.data.items.sort(this.compareDates),C({token:s.data.access_token,id:e}).then(l=>{let r=0;do if(this.mostRelated=l.data.artists[r],r++,r==20){this.refresh(l.data.artists[19].id);return}while(A(this.mostRelated.name));w(this.mostRelated.name)}).catch(l=>{console.log(l)})}).catch(o=>{console.log(o)})}).catch(a=>{console.log(a)})}).catch(s=>{console.log(s)})},isRepeat(e){let s=this.albums.indexOf(e);if(s==0)return!1;if(s!=-1){let a=this.albums[s-1];return e.name==a.name}},compareDates(e,s){let a=new Date(e.release_date),o=new Date(s.release_date);return a<o?-1:a>o?1:0},goToNewArtist(e){this.$router.push({name:"ArtistPage",params:{aid:e}}),this.refresh(e)}}},n=e=>(N("data-v-e9a22c14"),e=e(),$(),e),P={class:"body"},D=n(()=>t("br",null,null,-1)),I={class:"artistName"},V=n(()=>t("br",null,null,-1)),O=n(()=>t("br",null,null,-1)),j=n(()=>t("br",null,null,-1)),z=n(()=>t("br",null,null,-1)),E={style:{"background-color":"black"}},H={key:0,class:"albumResult"},L=["src"],M={class:"albumInfo"},q=n(()=>t("button",{type:"button",class:"btn btn-outline-danger",style:{position:"absolute",left:"72.5%"}},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"})])],-1));function G(e,s,a,o,l,r){return c(),d("section",P,[D,t("p",I,u(this.artistName),1),t("button",{class:"btn-get-started",onClick:s[0]||(s[0]=i=>r.goToNewArtist(this.mostRelated.id))},"Related Artist: "+u(this.mostRelated.name),1),V,O,j,z,t("ul",E,[(c(!0),d(f,null,R(this.albums,i=>(c(),d("li",null,[this.isRepeat(i)?x("",!0):(c(),d("div",H,[t("img",{src:i.images[0].url,alt:"Album Cover"},null,8,L),t("div",M,[q,t("h1",null,u(i.name),1),t("h3",null,u(i.release_date),1)])]))]))),256))])])}const b=y(F,[["render",G],["__scopeId","data-v-e9a22c14"]]),J={class:"wrapper"},K={name:"ArtistPage",components:{TheHeader:p,ArtistPageBody:b,TheFooter:g}},W=Object.assign(K,{setup(e){return(s,a)=>(c(),d(f,null,[t("header",null,[m(p),t("div",J,[m(b)])]),t("main",null,[m(g)])],64))}});export{W as default};
