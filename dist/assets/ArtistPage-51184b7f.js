import{g as M,a as S,h as u,b as B,d as T,j as v,r as k,u as x,k as g,e as p,s as A,T as N,f as z}from"./TheFooter-7aa9b582.js";import{_ as P,r as $,o as c,c as h,a as t,f as b,b as w,t as _,n as L,F as y,i as O,h as j,p as D,e as G}from"./index-a68657c6.js";const f=M(B),Z=S(B),F=u(f,"getSpotifyToken"),V=u(f,"getArtist"),U=u(f,"getAlbums"),R=u(f,"getRelatedArtists"),E=u(f,"getUnrelatedArtists"),C=u(f,"updateProfile"),H=u(f,"broadcastToListeners"),q=u(f,"getArtistInfo"),J={data(){return{artist:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:"",loggedIn:!1,token:"",sortByNewest:!0,info:""}},created(){T(Z,e=>{e?this.loggedIn=!0:this.loggedIn=!1})(),F().then(e=>{this.token=e.data.access_token,this.refresh(this.$route.params.aid,!1)}).catch(e=>{console.log(e)})},methods:{refresh(s,e){e||v(this),V({token:this.token,id:s}).then(o=>{this.artist=o.data,this.genres="",o.data.genres.forEach(n=>{this.genres+=n+" - "}),U({token:this.token,id:s}).then(n=>{this.albums=n.data.items.sort(this.compareDates),e||q({artist:this.artist.name,sentences:2}).then(r=>{r.data.code===0?this.info=r.data.info:this.info="",R({token:this.token,id:s}).then(i=>{let d=0;do{if(d==20){R({token:this.token,id:i.data.artists[19].id}).then(l=>{d=0;do{if(d==20){this.mostRelated=l.data.artists[19];return}this.mostRelated=l.data.artists[d],d++}while(k(this.mostRelated))});return}this.mostRelated=i.data.artists[d],d++}while(k(this.mostRelated));x(this.mostRelated),E({token:this.token,limit:20,genres:o.data.genres,backup:this.lastSuggestedGenre}).then(l=>{console.log(l.data),this.lastSuggestedGenre=l.data.genre;let m=0;do this.leastRelated=l.data.artists[m],m++;while(k(this.leastRelated));x(this.leastRelated),g()}).catch(l=>{console.log(l),g()})}).catch(i=>{console.log(i),g()})}).catch(r=>{console.log(r),g()})}).catch(n=>{console.log(n),e||g()})}).catch(o=>{console.log(o),e||g()})},toggleLikeAlbum(s){this.toggleLike(s,"likedAlbums")},toggleLikeArtist(s){this.toggleLike(s,"likedArtists")},toggleLike(s,e){if(this.loggedIn){let o=p();if(o[e].find(n=>n.id==s.id)){o[e].splice(o[e].indexOf(s),1);let n=o[e];C({field:e,value:n}).catch(r=>{console.log(r)}),A(o),this.refresh(this.$route.params.aid,!0)}else{o[e].push(s);let n=o[e];C({field:e,value:n}).then(()=>{this.refresh(this.$route.params.aid,!0)}).catch(r=>{console.log(r)}),A(o)}}else console.log("Not Logged In")},isRepeat(s){let e=this.albums.indexOf(s);if(e==0)return!1;if(e!=-1){let o=this.albums[e-1];return s.name==o.name}},compareDates(s,e){let o=new Date(s.release_date),n=new Date(e.release_date),r=o<n;return this.sortByNewest&&(r=o>n),r?-1:o===n?0:1},sortBy(s){this.sortByNewest=s,this.refresh(this.$route.params.aid,!0)},goToNewArtist(s){this.loggedIn&&C({field:"suggestedArtists",value:p().suggestedArtists}).catch(e=>{console.log(e)}),this.$router.push({name:"ArtistPage",params:{aid:s}}),this.refresh(s,!1)},isLikedAlbum(s){return this.checkLike(s,p().likedAlbums)},isLikedArtist(s){return this.checkLike(s,p().likedArtists)},checkLike(s,e){return this.loggedIn&&e.length>0?e.find(o=>o.id==s.id):!1},recommendArtist(){this.loggedIn?(v(this),H({artist:this.artist}).then(s=>{console.log(s.data),g()}).catch(s=>{console.log(s),g()})):console.log("Not Logged In")}}},a=s=>(D("data-v-e1bbb7ec"),s=s(),G(),s),K={class:"px-4 py-5 text-center backg",style:{color:"white"}},Q={class:"display-5 fw-bold artistName",style:{"padding-top":"10%","font-size":"55px"}},W=a(()=>t("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"},null,-1)),X={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"#ffff99"}},Y=a(()=>t("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),tt=[Y],et={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"white","font-size":"48px"}},st=a(()=>t("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),ot=[st],lt=a(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},[t("g",{id:"surface1"},[t("path",{style:{stroke:"none","fill-rule":"nonzero",fill:"rgb(100%,100%,100%)","fill-opacity":"1"},d:"M 8.640625 12 C 8.640625 13.855469 10.144531 15.359375 12 15.359375 C 13.855469 15.359375 15.359375 13.855469 15.359375 12 C 15.359375 10.144531 13.855469 8.640625 12 8.640625 C 10.144531 8.640625 8.640625 10.144531 8.640625 12 Z M 8.640625 12 "}),t("path",{style:{stroke:"none","fill-rule":"nonzero",fill:"rgb(100%,100%,100%)","fill-opacity":"1"},d:"M 6.121094 12 C 6.121094 10.0625 7.09375 8.367188 8.550781 7.429688 L 7.335938 6.144531 C 7.007812 6.382812 6.695312 6.660156 6.40625 6.964844 C 5.136719 8.3125 4.4375 10.097656 4.4375 12 C 4.4375 13.902344 5.136719 15.6875 6.40625 17.035156 C 6.695312 17.339844 7.007812 17.617188 7.335938 17.855469 L 8.550781 16.570312 C 7.09375 15.632812 6.121094 13.9375 6.121094 12 Z M 6.121094 12 "}),t("path",{style:{stroke:"none","fill-rule":"nonzero",fill:"rgb(100%,100%,100%)","fill-opacity":"1"},d:"M 17.878906 12 C 17.878906 13.9375 16.90625 15.632812 15.449219 16.570312 L 16.664062 17.855469 C 16.992188 17.617188 17.300781 17.339844 17.59375 17.035156 C 18.863281 15.6875 19.5625 13.902344 19.5625 12 C 19.5625 10.097656 18.863281 8.3125 17.59375 6.964844 C 17.304688 6.660156 16.992188 6.382812 16.664062 6.144531 L 15.449219 7.429688 C 16.90625 8.367188 17.878906 10.0625 17.878906 12 Z M 17.878906 12 "}),t("path",{style:{stroke:"none","fill-rule":"nonzero",fill:"rgb(100%,100%,100%)","fill-opacity":"1"},d:"M 1.921875 12 C 1.921875 9.078125 3.242188 6.492188 5.292969 4.871094 L 4.09375 3.601562 C 3.777344 3.863281 3.476562 4.144531 3.191406 4.449219 C 2.269531 5.429688 1.542969 6.570312 1.03125 7.84375 C 0.507812 9.160156 0.238281 10.5625 0.238281 12 C 0.238281 13.4375 0.507812 14.839844 1.03125 16.15625 C 1.542969 17.429688 2.265625 18.570312 3.191406 19.550781 C 3.476562 19.851562 3.777344 20.136719 4.09375 20.398438 L 5.292969 19.128906 C 3.242188 17.507812 1.921875 14.921875 1.921875 12 Z M 1.921875 12 "}),t("path",{style:{stroke:"none","fill-rule":"nonzero",fill:"rgb(100%,100%,100%)","fill-opacity":"1"},d:"M 22.078125 12 C 22.078125 14.921875 20.757812 17.507812 18.707031 19.128906 L 19.902344 20.382812 C 20.21875 20.125 20.523438 19.855469 20.808594 19.550781 C 21.730469 18.570312 22.457031 17.429688 22.964844 16.15625 C 23.488281 14.839844 23.757812 13.4375 23.757812 12 C 23.757812 10.5625 23.488281 9.160156 22.964844 7.84375 C 22.457031 6.570312 21.730469 5.429688 20.808594 4.449219 C 20.523438 4.148438 20.21875 3.863281 19.902344 3.601562 L 18.707031 4.871094 C 20.757812 6.492188 22.078125 9.078125 22.078125 12 Z M 22.078125 12 "})])],-1)),nt=[lt],it={class:"col-lg-6 mx-auto"},at={class:"artistGenre"},rt=a(()=>t("br",null,null,-1)),dt={class:"artistGenre"},ct={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},ht=a(()=>t("br",null,null,-1)),gt=a(()=>t("br",null,null,-1)),ut=a(()=>t("br",null,null,-1)),ft={class:"col-lg-6 mx-auto"},_t={class:"btn-group btn-group-toggle","data-toggle":"buttons"},pt=a(()=>t("br",null,null,-1)),bt=a(()=>t("br",null,null,-1)),mt=a(()=>t("br",null,null,-1)),kt={style:{"background-color":"transparent"}},wt={class:"row"},Ct={key:0},yt=["src"],vt=["onClick"],xt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"#ffff99","border-color":"transparent"}},At=a(()=>t("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),Lt=[At],Rt={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"white","border-color":"transparent"}},Bt=a(()=>t("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),Nt=[Bt],zt={class:"col-2.5"},It={style:{"font-size":"14px"}},Mt={style:{"font-size":"12px"}},St=a(()=>t("div",{class:"col-lg-6 mx-auto gap",style:{"padding-top":"10%",width:"100vw",height:"60vh"}},null,-1));function Tt(s,e,o,n,r,i){const d=$("router-link");return c(),h(y,null,[t("section",K,[t("h1",Q,[W,b(d,{type:"button",class:"fa fa-angle-double-left",style:{"font-size":"48px",color:"white","background-color":"transparent","text-decoration":"none","text-indent":"20px"},to:"/Search"}),w(" "+_(this.artist.name)+" ",1),t("button",{onClick:e[0]||(e[0]=l=>i.toggleLikeArtist(this.artist)),type:"button",class:"btn btn",style:{"border-color":"black"}},[i.isLikedArtist(this.artist)?(c(),h("svg",X,tt)):(c(),h("svg",et,ot))]),t("button",{onClick:e[1]||(e[1]=(...l)=>i.recommendArtist&&i.recommendArtist(...l)),type:"button",class:"btn btn",style:{"border-color":"transparent"}},nt)]),t("div",it,[t("p",at,_(this.genres),1),rt,t("p",dt,_(this.info),1),t("div",ct,[t("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:e[2]||(e[2]=l=>i.goToNewArtist(this.mostRelated.id))},"Related Artist: "+_(this.mostRelated.name),1),t("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:e[3]||(e[3]=l=>i.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+_(this.leastRelated.name),1)])]),ht,gt,ut,t("div",ft,[t("div",_t,[t("label",{class:L(["btn btn-secondary",{active:this.sortByNewest}])},[t("input",{type:"radio",style:{display:"none"},id:"Newest",autocomplete:"off",checked:"",onClick:e[4]||(e[4]=l=>i.sortBy(!0))}),w(" Newest ")],2),t("label",{class:L(["btn btn-secondary",{active:!this.sortByNewest}])},[t("input",{type:"radio",style:{display:"none"},id:"Oldest",autocomplete:"off",onClick:e[5]||(e[5]=l=>i.sortBy(!1))}),w(" Oldest ")],2)])]),pt,bt,mt,t("ul",kt,[(c(!0),h(y,null,O(this.albums,l=>(c(),h("li",null,[t("div",wt,[this.isRepeat(l)?j("",!0):(c(),h("div",Ct,[t("img",{src:l.images[0].url,alt:"Album Cover"},null,8,yt),t("button",{onClick:m=>i.toggleLikeAlbum(l),type:"button",class:"btn btn",style:{position:"absolute"}},[i.isLikedAlbum(l)?(c(),h("svg",xt,Lt)):(c(),h("svg",Rt,Nt))],8,vt)])),t("div",zt,[t("h1",It,_(l.name),1),t("h3",Mt,_(l.release_date),1)])])]))),256))])]),St],64)}const I=P(J,[["render",Tt],["__scopeId","data-v-e1bbb7ec"]]),Pt={class:"wrapper"},$t={name:"ArtistPage",components:{TheHeader:N,ArtistPageBody:I,TheFooter:z}},Dt=Object.assign($t,{setup(s){return(e,o)=>(c(),h(y,null,[t("header",null,[b(N),t("div",Pt,[b(I)])]),t("main",null,[b(z)])],64))}});export{Dt as default};
