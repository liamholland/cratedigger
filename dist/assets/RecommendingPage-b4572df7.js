import{g as w,a as A,h,b as k,d as I,j as R,e as d,r as P,k as C,u as _,o as f,i as T,s as E,T as v,f as b}from"./TheFooter-db175250.js";import{_ as j,o as l,c as a,a as e,t as m,b as c,F as S,p as B,e as F,f as g}from"./index-a811184e.js";const u=w(k),H=A(k),N=h(u,"getSpotifyToken"),V=h(u,"recommendArtists"),y=h(u,"updateProfile"),z={data(){return{token:"",currentSuggestion:{},loggedIn:!1,genres:"",loading:!1,noProfile:!1}},created(){I(H,t=>{t?T()?(this.loggedIn=!0,N().then(o=>{this.token=o.data.access_token,this.refreshRecommendation()}).catch(o=>{console.log(o)})):this.noProfile=!0:this.loggedIn=!1})()},methods:{refreshRecommendation(){this.loading||(R(this),this.loading=!0),V({token:this.token,user:d()}).then(s=>{console.log(s.data),P(s.data.artist)?this.refreshRecommendation():(this.currentSuggestion=s.data.artist,this.genres="",this.currentSuggestion.genres.forEach(t=>{this.genres+=t+" , "}),C(),this.loading=!1)})},likeArtist(){if(this.currentSuggestion!=null){let s=d();console.log(s),s.likedArtists.push(this.currentSuggestion);let t=s.likedArtists;E(s),_(this.currentSuggestion),t!==null&&y({field:"likedArtists",value:t}).then(o=>{console.log(o.data),this.refreshRecommendation()}).catch(o=>{console.log(o)})}},skipArtist(){if(this.currentSuggestion!=null){_(this.currentSuggestion);let s=d().suggestedArtists;s!==null&&y({field:"suggestedArtists",value:s}).then(t=>{console.log(t.data),this.refreshRecommendation()}).catch(t=>{console.log(t)})}},opensignin(){f(0)},opensignup(){f(1)}},computed:{artistImage(){return JSON.stringify(this.currentSuggestion)!="{}"?this.currentSuggestion.images[0].url:""}}},r=s=>(B("data-v-46fb0a2b"),s=s(),F(),s),D={key:0},L={class:"px-4 py-5 text-center backg",style:{width:"100vw",height:"100vh",color:"white"}},O={class:"display-5 fw-bold",style:{"padding-top":"10%"}},M={class:"col-lg-6 mx-auto"},G={class:"lead mb-4"},J={class:"container px-1"},Y=["src","alt"],q={key:1},K=r(()=>e("section",{class:"px-4 py-5 text-center",style:{width:"100vw",height:"100vh",color:"white","background-color":"black"}},[e("div",{class:"col-lg-6 mx-auto",style:{"padding-top":"10%"}},[e("h4",{class:"lead mb-4",style:{color:"white"}},"Visit your account page first so we can adjust your recommendations!"),e("div",{class:"d-grid gap-2 d-sm-flex justify-content-sm-center"})])],-1)),Q=[K],U={key:2},W={class:"px-4 py-5 text-center backg",style:{"font-family":"IBM Plex Sans Condensed, Sans Serif",width:"100vw",height:"100vh",color:"white"}},X={class:"col-lg-6 mx-auto",style:{"padding-top":"10%"}},Z={class:"lead mb-4",style:{color:"white"}},$=r(()=>e("br",null,null,-1)),ee={style:{display:"inline"}},te=r(()=>e("br",null,null,-1)),se={style:{display:"inline"}},oe=r(()=>e("div",{class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},null,-1)),ne=r(()=>e("div",{class:"col-lg-6 mx-auto gap",style:{"padding-top":"10%",width:"100vw",height:"60vh"}},null,-1));function ie(s,t,o,re,p,n){return l(),a(S,null,[p.loggedIn?(l(),a("div",D,[e("section",L,[e("h1",O,"Artist: "+m(this.currentSuggestion.name),1),e("div",M,[e("p",G,"Genres: "+m(this.genres),1),e("div",J,[e("button",{style:{"background-color":"transparent","padding-left":"15px",border:"none","font-size":"150%"},onClick:t[0]||(t[0]=(...i)=>n.skipArtist&&n.skipArtist(...i))},"❌"),e("img",{src:n.artistImage,alt:this.currentSuggestion.name,class:"img-fluid rounded-3",width:"180",height:"180",loading:"lazy"},null,8,Y),e("button",{style:{"background-color":"transparent","padding-right":"15px",border:"none","font-size":"150%"},onClick:t[1]||(t[1]=(...i)=>n.likeArtist&&n.likeArtist(...i))},"✅")])])])])):p.noProfile?(l(),a("div",q,Q)):(l(),a("div",U,[e("section",W,[e("div",X,[e("h4",Z,[c("You are not logged into your account."),$,c(" To login click "),e("h3",ee,[e("strong",null,[e("a",{class:"here",onClick:t[2]||(t[2]=i=>n.opensignin())},"HERE")])]),te,c(" or to create an account click "),e("h3",se,[e("strong",null,[e("a",{class:"here",onClick:t[3]||(t[3]=i=>n.opensignup())},"HERE")])]),c(". ")]),oe])])])),ne],64)}const x=j(z,[["render",ie],["__scopeId","data-v-46fb0a2b"]]),le={class:"wrapper"},ae={name:"HomeOne",components:{TheHeader:v,Recommender:x,TheFooter:b}},ge=Object.assign(ae,{setup(s){return(t,o)=>(l(),a(S,null,[e("header",null,[g(v),e("div",le,[g(x)])]),e("main",null,[g(b)])],64))}});export{ge as default};
