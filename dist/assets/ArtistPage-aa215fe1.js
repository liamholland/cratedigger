import{g as S,a as B,h as u,b as y,d as T,j as w,r as b,u as v,k as g,e as m,s as A,T as R,f as C}from"./TheFooter-20b67b9a.js";import{_ as N,r as z,o as d,a as c,b as s,d as p,f as P,t as f,F as L,i as D,g as $,p as j,h as F}from"./index-49b34539.js";const _=S(y),G=B(y),M=u(_,"getSpotifyToken"),V=u(_,"getArtist"),O=u(_,"getAlbums"),x=u(_,"getRelatedArtists"),U=u(_,"getUnrelatedArtists"),k=u(_,"updateProfile"),E=u(_,"broadcastToListeners"),H={data(){return{artist:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:"",loggedIn:!1,token:""}},created(){T(G,t=>{t?this.loggedIn=!0:this.loggedIn=!1})(),M().then(t=>{this.token=t.data.access_token,this.refresh(this.$route.params.aid,!1)}).catch(t=>{console.log(t)})},methods:{refresh(e,t){t||w(this),V({token:this.token,id:e}).then(o=>{this.artist=o.data,this.genres="",o.data.genres.forEach(i=>{this.genres+=i+" - "}),O({token:this.token,id:e}).then(i=>{this.albums=i.data.items.sort(this.compareDates),t||x({token:this.token,id:e}).then(r=>{let l=0;do{if(l==20){x({token:this.token,id:r.data.artists[19].id}).then(a=>{l=0;do{if(l==20){this.mostRelated=a.data.artists[19];return}this.mostRelated=a.data.artists[l],l++}while(b(this.mostRelated))});return}this.mostRelated=r.data.artists[l],l++}while(b(this.mostRelated));v(this.mostRelated),U({token:this.token,limit:20,genres:o.data.genres,backup:this.lastSuggestedGenre}).then(a=>{console.log(a.data),this.lastSuggestedGenre=a.data.genre;let n=0;do this.leastRelated=a.data.artists[n],n++;while(b(this.leastRelated));v(this.leastRelated),g()}).catch(a=>{console.log(a),g()})}).catch(r=>{console.log(r),g()})}).catch(i=>{console.log(i),t||g()})}).catch(o=>{console.log(o),t||g()})},toggleLikeAlbum(e){this.toggleLike(e,"likedAlbums")},toggleLikeArtist(e){this.toggleLike(e,"likedArtists")},toggleLike(e,t){if(this.loggedIn){let o=m();if(o[t].find(i=>i.id==e.id)){o[t].splice(o[t].indexOf(e),1);let i=o[t];k({field:t,value:i}).catch(r=>{console.log(r)}),A(o),this.refresh(this.$route.params.aid,!0)}else{o[t].push(e);let i=o[t];k({field:t,value:i}).then(()=>{this.refresh(this.$route.params.aid,!0)}).catch(r=>{console.log(r)}),A(o)}}else console.log("Not Logged In")},isRepeat(e){let t=this.albums.indexOf(e);if(t==0)return!1;if(t!=-1){let o=this.albums[t-1];return e.name==o.name}},compareDates(e,t){let o=new Date(e.release_date),i=new Date(t.release_date);return o>i?-1:o>i?1:0},goToNewArtist(e){this.loggedIn&&k({field:"suggestedArtists",value:m().suggestedArtists}).catch(t=>{console.log(t)}),this.$router.push({name:"ArtistPage",params:{aid:e}}),this.refresh(e,!1)},isLikedAlbum(e){return this.checkLike(e,m().likedAlbums)},isLikedArtist(e){return this.checkLike(e,m().likedArtists)},checkLike(e,t){return this.loggedIn&&t.length>0?t.find(o=>o.id==e.id):!1},recommendArtist(){this.loggedIn?(w(this),E({artist:this.artist}).then(e=>{console.log(e.data),g()}).catch(e=>{console.log(e),g()})):console.log("Not Logged In")}}},h=e=>(j("data-v-7c7dbc03"),e=e(),F(),e),q={class:"px-4 py-5 text-center",style:{color:"white","background-color":"black"}},J={class:"display-5 fw-bold artistName",style:{"padding-top":"10%","font-size":"55px"}},K=h(()=>s("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"},null,-1)),Q={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"1DB954"}},W=h(()=>s("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),X=[W],Y={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"white","font-size":"48px"}},Z=h(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),tt=[Z],et={class:"col-lg-6 mx-auto"},st={class:"artistGenre"},ot={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},lt=h(()=>s("br",null,null,-1)),it=h(()=>s("br",null,null,-1)),nt=h(()=>s("br",null,null,-1)),at={style:{"background-color":"black"}},rt={class:"row"},dt={key:0},ct=["src"],ht=["onClick"],gt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"1DB954"}},ut=h(()=>s("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),_t=[ut],ft={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"white"}},mt=h(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),pt=[mt],bt={class:"col-2.5"},kt={style:{"font-size":"14px"}},wt={style:{"font-size":"12px"}};function vt(e,t,o,i,r,l){const a=z("router-link");return d(),c("section",q,[s("h1",J,[K,p(a,{type:"button",class:"fa fa-angle-double-left",style:{"font-size":"48px",color:"white","background-color":"black","text-decoration":"none","text-indent":"20px"},to:"/Search"}),P(" "+f(this.artist.name)+" ",1),s("button",{onClick:t[0]||(t[0]=n=>l.toggleLikeArtist(this.artist)),type:"button",class:"btn btn",style:{"border-color":"black"}},[l.isLikedArtist(this.artist)?(d(),c("svg",Q,X)):(d(),c("svg",Y,tt))]),s("button",{onClick:t[1]||(t[1]=(...n)=>l.recommendArtist&&l.recommendArtist(...n)),type:"button",class:"btn btn",style:{"border-color":"black"}},"Recommended To Listeners")]),s("div",et,[s("p",st,f(this.genres),1),s("div",ot,[s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[2]||(t[2]=n=>l.goToNewArtist(this.mostRelated.id))},"Related Artist: "+f(this.mostRelated.name),1),s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[3]||(t[3]=n=>l.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+f(this.leastRelated.name),1)])]),lt,it,nt,s("ul",at,[(d(!0),c(L,null,D(this.albums,n=>(d(),c("li",null,[s("div",rt,[this.isRepeat(n)?$("",!0):(d(),c("div",dt,[s("img",{src:n.images[0].url,alt:"Album Cover"},null,8,ct),s("button",{onClick:yt=>l.toggleLikeAlbum(n),type:"button",class:"btn btn",style:{position:"absolute"}},[l.isLikedAlbum(n)?(d(),c("svg",gt,_t)):(d(),c("svg",ft,pt))],8,ht)])),s("div",bt,[s("h1",kt,f(n.name),1),s("h3",wt,f(n.release_date),1)])])]))),256))])])}const I=N(H,[["render",vt],["__scopeId","data-v-7c7dbc03"]]),At={class:"wrapper"},xt={name:"ArtistPage",components:{TheHeader:R,ArtistPageBody:I,TheFooter:C}},Lt=Object.assign(xt,{setup(e){return(t,o)=>(d(),c(L,null,[s("header",null,[p(R),s("div",At,[p(I)])]),s("main",null,[p(C)])],64))}});export{Lt as default};
