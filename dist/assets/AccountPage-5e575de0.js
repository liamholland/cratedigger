import{g as C,a as B,h as g,b as U,d as F,o as v,c as S,e as P,s as h,j as w,k as d,T as R,f as L}from"./TheFooter-20b67b9a.js";import{_ as E,o as i,a as l,b as e,w as b,v as I,t as u,F as p,i as m,g as O,f as A,p as N,h as V,d as k}from"./index-49b34539.js";const f=C(U),q=B(U),D=g(f,"getProfileInfo"),x=g(f,"updateProfile"),z=g(f,"getUser"),M=g(f,"addListener"),j=g(f,"removeListener"),_=g(f,"getListeningTo"),G={data(){return{email:"",password:"",loggedIn:!1,displayAlbums:!1,displayRecs:!1,accountInfo:{},listeningTo:[],searchedUser:{},hasResult:!1,message:"",input:"",typing:!1,newBio:"",newURL:""}},created(){F(q,t=>{t?this.loggedIn=!0:this.loggedIn=!1})()},watch:{loggedIn(){this.refresh()},"$route.params":{handler(){this.refresh()}}},methods:{opensignin(){v(0)},opensignup(){v(1)},openProfileEdit(){v(2)},closeProfileEdit(){S(2)},refresh(){this.accountInfo={},this.$route.params.name&&JSON.stringify(P())=="{}"?(this.loggedIn=!0,console.log("Getting Profile From Server"),D({field:null}).then(s=>{h(s.data),this.accountInfo=s.data,_().then(t=>{this.listeningTo=t.data,console.log(this.listeningTo)}).catch(t=>{console.log(t)})}).catch(s=>{console.log(s.code),console.log(s.message)})):this.$route.params.name?(this.loggedIn=!0,this.accountInfo=P(),_().then(s=>{this.listeningTo=s.data,console.log(this.listeningTo)}).catch(s=>{console.log(s)})):this.loggedIn=!1},showAlbums(s){this.displayAlbums=s,this.displayRecs=!1},showRecommendations(){console.log(this.accountInfo.recommendedArtists),this.displayAlbums=!1,this.displayRecs=!0},updateProfile(){w(this),this.newBio.length>0&&this.newURL.length>0?(this.updateBio(),this.updatePFP()):this.newBio.length>0?this.updateBio():this.newURL.length>0&&this.updatePFP(),this.closeProfileEdit(),this.refresh()},updateBio(){x({field:"bio",value:this.newBio}).then(s=>{console.log(s.data.body),this.accountInfo.bio=this.newBio,h(this.accountInfo),this.newBio="",d()}).catch(s=>{console.log(s.code,s.message)})},updatePFP(){x({field:"pfpURL",value:this.newURL}).then(s=>{console.log(s.data.body),this.accountInfo.pfpURL=this.newURL,h(this.accountInfo),this.newURL="",d()}).catch(s=>{console.log(s.code,s.message)})},search(s){this.typing||(this.typing=!0,setTimeout(()=>this.sendSearchRequest(s),150))},sendSearchRequest(s){this.typing=!1,s.length>0?z({username:s}).then(t=>{if(t.data.code===1){console.log(t.data.body),this.hasResult=!1,this.searchedUser=={};return}else t.data.code===0&&(console.log(t.data.userData),this.searchedUser=t.data.userData,this.accountInfo.listeningTo.find(c=>c==this.searchedUser.id)?(this.message=`Already Listening to ${this.searchedUser.username}`,this.hasResult=!1):(this.hasResult=!0,this.message="No Such User"))}).catch(t=>{console.log(t)}):(this.message="",this.hasResult=!1,this.searchedUser={})},follow(){this.hasResult&&(w(this),this.accountInfo.hasOwnProperty("listeningTo")||(this.accountInfo.listeningTo=[]),this.hasResult=!1,this.accountInfo.listeningTo.push(this.searchedUser.id),h(this.accountInfo),M({id:this.searchedUser.id}).then(s=>{console.log(s),this.searchedUser={},_().then(t=>{this.listeningTo=t.data,d()}).catch(t=>{console.log(t),d()})}).catch(s=>{console.log(s),d()}))},unfollow(s){w(this),this.accountInfo.listeningTo.splice(this.accountInfo.listeningTo.indexOf(s),1),this.listeningTo=this.accountInfo.listeningTo,h(this.accountInfo),j({id:s}).then(t=>{console.log(t.data),_().then(c=>{this.listeningTo=c.data,d()}).catch(c=>{console.log(c),d()})}).catch(t=>{console.log(t),d()})},notAlreadyLiked(s){return!this.accountInfo.likedArtists.find(t=>t.id==s)},viewArtist(s){let t=[];this.accountInfo.recommendedArtists.length==1?this.accountInfo.recommendedArtists=[]:t=this.accountInfo.recommendedArtists.splice(this.accountInfo.recommendedArtists.indexOf(this.accountInfo.recommendedArtists.find(c=>c.id==s)),1),h(this.accountInfo),x({field:"recommendedArtists",value:t}).then(c=>{console.log(c)}),this.$router.push({name:"ArtistPage",params:{aid:s}})},getOtherPFP(s){return s==""?"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png":s}},computed:{pfpURL(){return JSON.stringify(this.accountInfo)=="{}"||this.accountInfo.pfpURL==""?"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png":this.accountInfo.pfpURL}}},a=s=>(N("data-v-194df346"),s=s(),V(),s),J={key:0},H={id:"myModal1",class:"modal"},K={style:{"align-items":"center"},class:"modal-content"},W=a(()=>e("h1",{class:"h3 mb-3 fw-normal",style:{color:"white","font-size":"40px"}},"Edit Profile",-1)),X={class:"form-floating"},Y=a(()=>e("label",{for:"floatingInput"},"Edit Bio",-1)),Q=a(()=>e("br",null,null,-1)),Z={class:"form-floating"},$=a(()=>e("label",{for:"floatingInput"},"Change Profile Picture",-1)),ee=a(()=>e("br",null,null,-1)),te=a(()=>e("br",null,null,-1)),se=a(()=>e("head",null,[e("meta",{charset:"UTF-8"}),e("meta",{"http-equiv":"X-UA-Compatible",content:"IE=edge"}),e("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})],-1)),oe={class:"header__wrapper",style:{"background-color":"black"}},ne={class:"cols__container",style:{"background-color":"#151515"}},ie={class:"right__col",style:{"background-color":"#151515"}},le={class:"left__col",style:{"background-color":"#151515"}},ae={class:"card",style:{"background-color":"#151515"}},ce={class:"rounded-top text-white d-flex flex-row",style:{"background-color":"#151515",height:"200px"}},de={class:"ms-4 mt-5flex-column",style:{width:"150px","background-color":"#151515"}},re=["src"],he={class:"ms-3",style:{"margin-top":"30px"}},ue={class:"display-5 fw-bold",style:{"font-size":"225%"}},ge={class:"ms-3",style:{overflow:"scroll"}},fe=a(()=>e("h4",null,"Listening To:",-1)),pe=["onClick"],me=["src"],_e={key:0,class:"ms-3"},ye=["src"],ve={key:1,class:"ms-3"},we=a(()=>e("br",null,null,-1)),be={class:"p-4 text-black",style:{"text-align":"left","background-color":"#151515"}},Ie={style:{"text-indent":"20px",cursor:"pointer"}},ke={style:{"text-indent":"20px",cursor:"pointer"}},xe={style:{"text-indent":"20px",cursor:"pointer"}},Pe=a(()=>e("br",null,null,-1)),Ae={key:0,class:"photos"},Ue=["src","alt","onClick"],Re={key:1,class:"photos"},Le=["src","alt","onClick"],Te={key:2,class:"photos"},Ce=["src","alt","onClick"],Be=a(()=>e("br",null,null,-1)),Fe=a(()=>e("div",{class:"col-lg-6 mx-auto",style:{"padding-top":"10%",width:"100vw",height:"60vh","background-color":"#151515"}},null,-1)),Se={key:1},Ee={class:"px-4 py-5 text-center",style:{width:"100vw",height:"100vh",color:"white","background-color":"black"}},Oe={class:"col-lg-6 mx-auto",style:{"padding-top":"10%"}},Ne={class:"lead mb-4",style:{color:"white"}},Ve={style:{display:"inline"}},qe={style:{display:"inline"}},De=a(()=>e("div",{class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},null,-1));function ze(s,t,c,Ge,r,n){return this.loggedIn?(i(),l("div",J,[e("div",H,[e("div",K,[e("span",{class:"close",onClick:t[0]||(t[0]=o=>n.closeProfileEdit())},"Ã—"),W,e("div",X,[b(e("input",{class:"form-control",id:"floatingInput",required:"","onUpdate:modelValue":t[1]||(t[1]=o=>r.newBio=o)},null,512),[[I,r.newBio]]),Y]),Q,e("div",Z,[b(e("input",{class:"form-control",id:"floatingInput",required:"","onUpdate:modelValue":t[2]||(t[2]=o=>r.newURL=o)},null,512),[[I,r.newURL]]),$]),ee,e("a",{onClick:t[3]||(t[3]=(...o)=>n.updateProfile&&n.updateProfile(...o)),class:"btn-get-started"},"Submit"),te])]),se,e("body",null,[e("div",oe,[e("div",ne,[e("div",ie,[e("div",le,[e("div",ae,[e("div",ce,[e("div",de,[e("img",{src:this.pfpURL,alt:"Generic placeholder image",class:"img-fluid img-thumbnail mt-4 mb-2",style:{height:"150px",width:"150px","z-index":"1"}},null,8,re),e("button",{type:"button",style:{"z-index":"1","background-color":"white","border-radius":"4px",border:"none",width:"150px"},onClick:t[4]||(t[4]=o=>n.openProfileEdit())}," Edit profile ")]),e("div",he,[e("h2",ue,u(this.accountInfo.username),1),e("p",null,u(this.accountInfo.bio),1),e("h5",null,"Listeners: "+u(this.accountInfo.listenerCount),1)]),e("div",ge,[fe,(i(!0),l(p,null,m(this.listeningTo,o=>(i(),l("div",{onClick:y=>n.unfollow(o.id)},[e("img",{src:n.getOtherPFP(o.pfpURL),style:{height:"50px",width:"50px"},alt:"PFP"},null,8,me),e("h4",null,u(o.username),1)],8,pe))),256))]),b(e("input",{class:"input-search","onUpdate:modelValue":t[5]||(t[5]=o=>r.input=o),onKeyup:t[6]||(t[6]=o=>n.search(this.input)),placeholder:"Whos recommendations do you want to listen to?",style:{width:"30%",height:"50px"}},null,544),[[I,r.input]]),r.hasResult?(i(),l("div",_e,[e("div",{onClick:t[7]||(t[7]=(...o)=>n.follow&&n.follow(...o))},[e("img",{src:n.getOtherPFP(this.searchedUser.pfp),style:{height:"50px",width:"50px"},alt:"PFP"},null,8,ye),e("h4",null,u(this.searchedUser.username),1)])])):(i(),l("div",ve,[e("h4",null,u(this.message),1)]))]),we,e("div",be,[e("nav",null,[e("ul",null,[e("li",Ie,[e("a",{onClick:t[8]||(t[8]=o=>n.showAlbums(!0))},"Liked Albums")]),e("li",ke,[e("a",{onClick:t[9]||(t[9]=o=>n.showAlbums(!1))},"Liked Artists")]),e("li",xe,[e("a",{onClick:t[10]||(t[10]=(...o)=>n.showRecommendations&&n.showRecommendations(...o))},"Recommended Artists")])]),Pe]),this.displayAlbums?(i(),l("div",Ae,[(i(!0),l(p,null,m(this.accountInfo.likedAlbums,o=>(i(),l("img",{src:o.images[0].url,alt:o.name,onClick:y=>this.$router.push({name:"ArtistPage",params:{aid:o.artists[0].id}})},null,8,Ue))),256))])):this.displayRecs?(i(),l("div",Re,[(i(!0),l(p,null,m(this.accountInfo.recommendedArtists,o=>(i(),l("div",null,[n.notAlreadyLiked(o.id)?(i(),l("img",{key:0,src:o.images[0].url,alt:o.name,onClick:y=>n.viewArtist(o.id)},null,8,Le)):O("",!0)]))),256))])):(i(),l("div",Te,[(i(!0),l(p,null,m(this.accountInfo.likedArtists,o=>(i(),l("img",{src:o.images[0].url,alt:o.name,onClick:y=>this.$router.push({name:"ArtistPage",params:{aid:o.id}})},null,8,Ce))),256))]))])])]),Be])])]),Fe])])):(i(),l("div",Se,[e("section",Ee,[e("div",Oe,[e("h4",Ne,[A("You are not logged into your account. To login click "),e("h3",Ve,[e("strong",null,[e("a",{onClick:t[11]||(t[11]=o=>n.opensignin())},"here")])]),A(" or to create an account click "),e("h3",qe,[e("strong",null,[e("a",{onClick:t[12]||(t[12]=o=>n.opensignup())},"here")])])]),De])])]))}const T=E(G,[["render",ze],["__scopeId","data-v-194df346"]]),Me={class:"wrapper"},je={name:"AboutUs",components:{TheHeader:R,AccountPageBody:T,TheFooter:L}},Ke=Object.assign(je,{setup(s){return(t,c)=>(i(),l(p,null,[e("header",null,[k(R),e("div",Me,[k(T)])]),e("main",null,[k(L)])],64))}});export{Ke as default};
