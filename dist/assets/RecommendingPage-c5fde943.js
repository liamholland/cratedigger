import{g as x,a as w,h as d,b as k,d as A,j as I,e as r,r as P,k as R,u as h,o as p,i as T,s as C,T as y,f as v}from"./TheFooter-d24c91bf.js";import{_ as j,o as a,c as l,a as e,t as _,b as f,p as B,e as F,f as c,F as N}from"./index-e54e5505.js";const g=x(k),V=w(k),z=d(g,"getSpotifyToken"),D=d(g,"recommendArtists"),m=d(g,"updateProfile"),L={data(){return{token:"",currentSuggestion:{},loggedIn:!1,genres:"",loading:!1,noProfile:!1}},created(){A(V,t=>{t?T()?(this.loggedIn=!0,z().then(o=>{this.token=o.data.access_token,this.refreshRecommendation()}).catch(o=>{console.log(o)})):this.noProfile=!0:this.loggedIn=!1})()},methods:{refreshRecommendation(){this.loading||(I(this),this.loading=!0),D({token:this.token,user:r()}).then(s=>{console.log(s.data),P(s.data.artist)?this.refreshRecommendation():(this.currentSuggestion=s.data.artist,this.genres="",this.currentSuggestion.genres.forEach(t=>{this.genres+=t+" , "}),R(),this.loading=!1)})},likeArtist(){if(this.currentSuggestion!=null){let s=r();console.log(s),s.likedArtists.push(this.currentSuggestion);let t=s.likedArtists;C(s),h(this.currentSuggestion),t!==null&&m({field:"likedArtists",value:t}).then(o=>{console.log(o.data),this.refreshRecommendation()}).catch(o=>{console.log(o)})}},skipArtist(){if(this.currentSuggestion!=null){h(this.currentSuggestion);let s=r().suggestedArtists;s!==null&&m({field:"suggestedArtists",value:s}).then(t=>{console.log(t.data),this.refreshRecommendation()}).catch(t=>{console.log(t)})}},opensignin(){p(0)},opensignup(){p(1)}},computed:{artistImage(){return JSON.stringify(this.currentSuggestion)!="{}"?this.currentSuggestion.images[0].url:""}}},b=s=>(B("data-v-dad56c89"),s=s(),F(),s),O={key:0},E={class:"px-4 py-5 text-center",style:{width:"100vw",height:"100vh",color:"white","background-color":"black"}},H={class:"display-5 fw-bold",style:{"padding-top":"10%"}},G={class:"col-lg-6 mx-auto"},J={class:"lead mb-4"},M={class:"container px-1"},Y=["src","alt"],q={key:1},K=b(()=>e("section",{class:"px-4 py-5 text-center",style:{width:"100vw",height:"100vh",color:"white","background-color":"black"}},[e("div",{class:"col-lg-6 mx-auto",style:{"padding-top":"10%"}},[e("h4",{class:"lead mb-4",style:{color:"white"}},"Visit your account page first so we can adjust your recommendations!"),e("div",{class:"d-grid gap-2 d-sm-flex justify-content-sm-center"})])],-1)),Q=[K],U={key:2},W={class:"px-4 py-5 text-center",style:{width:"100vw",height:"100vh",color:"white","background-color":"black"}},X={class:"col-lg-6 mx-auto",style:{"padding-top":"10%"}},Z={class:"lead mb-4",style:{color:"white"}},$={style:{display:"inline"}},ee={style:{display:"inline"}},te=b(()=>e("div",{class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},null,-1));function se(s,t,o,ie,u,n){return u.loggedIn?(a(),l("div",O,[e("section",E,[e("h1",H,"Artist: "+_(this.currentSuggestion.name),1),e("div",G,[e("p",J,"Genres: "+_(this.genres),1),e("div",M,[e("button",{style:{"background-color":"black","padding-left":"15px",border:"none","font-size":"150%"},onClick:t[0]||(t[0]=(...i)=>n.skipArtist&&n.skipArtist(...i))},"❌"),e("img",{src:n.artistImage,alt:this.currentSuggestion.name,class:"img-fluid rounded-3",width:"180",height:"180",loading:"lazy"},null,8,Y),e("button",{style:{"background-color":"black","padding-right":"15px",border:"none","font-size":"150%"},onClick:t[1]||(t[1]=(...i)=>n.likeArtist&&n.likeArtist(...i))},"✅")])])])])):u.noProfile?(a(),l("div",q,Q)):(a(),l("div",U,[e("section",W,[e("div",X,[e("h4",Z,[f("You are not logged into your account. To login click "),e("h3",$,[e("strong",null,[e("a",{onClick:t[2]||(t[2]=i=>n.opensignin())},"here")])]),f(" or to create an account click "),e("h3",ee,[e("strong",null,[e("a",{onClick:t[3]||(t[3]=i=>n.opensignup())},"here")])])]),te])])]))}const S=j(L,[["render",se],["__scopeId","data-v-dad56c89"]]),oe={class:"wrapper"},ne={name:"HomeOne",components:{TheHeader:y,Recommender:S,TheFooter:v}},re=Object.assign(ne,{setup(s){return(t,o)=>(a(),l(N,null,[e("header",null,[c(y),e("div",oe,[c(S)])]),e("main",null,[c(v)])],64))}});export{re as default};
