import{g as S,a as T,h as u,b as R,d as z,j as v,r as b,u as y,k as g,e as p,s as A,T as B,f as L}from"./TheFooter-639380c6.js";import{_ as P,r as D,o as c,c as h,a as s,f as m,b as k,t as _,n as x,F as N,i as $,h as O,p as j,e as F}from"./index-6515ee94.js";const f=S(R),G=T(R),M=u(f,"getSpotifyToken"),V=u(f,"getArtist"),U=u(f,"getAlbums"),C=u(f,"getRelatedArtists"),E=u(f,"getUnrelatedArtists"),w=u(f,"updateProfile"),H=u(f,"broadcastToListeners"),q={data(){return{artist:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:"",loggedIn:!1,token:"",sortByNewest:!0}},created(){z(G,t=>{t?this.loggedIn=!0:this.loggedIn=!1})(),M().then(t=>{this.token=t.data.access_token,this.refresh(this.$route.params.aid,!1)}).catch(t=>{console.log(t)})},methods:{refresh(e,t){t||v(this),V({token:this.token,id:e}).then(o=>{this.artist=o.data,this.genres="",o.data.genres.forEach(n=>{this.genres+=n+" - "}),U({token:this.token,id:e}).then(n=>{this.albums=n.data.items.sort(this.compareDates),t||C({token:this.token,id:e}).then(a=>{let l=0;do{if(l==20){C({token:this.token,id:a.data.artists[19].id}).then(d=>{l=0;do{if(l==20){this.mostRelated=d.data.artists[19];return}this.mostRelated=d.data.artists[l],l++}while(b(this.mostRelated))});return}this.mostRelated=a.data.artists[l],l++}while(b(this.mostRelated));y(this.mostRelated),E({token:this.token,limit:20,genres:o.data.genres,backup:this.lastSuggestedGenre}).then(d=>{console.log(d.data),this.lastSuggestedGenre=d.data.genre;let i=0;do this.leastRelated=d.data.artists[i],i++;while(b(this.leastRelated));y(this.leastRelated),g()}).catch(d=>{console.log(d),g()})}).catch(a=>{console.log(a),g()})}).catch(n=>{console.log(n),t||g()})}).catch(o=>{console.log(o),t||g()})},toggleLikeAlbum(e){this.toggleLike(e,"likedAlbums")},toggleLikeArtist(e){this.toggleLike(e,"likedArtists")},toggleLike(e,t){if(this.loggedIn){let o=p();if(o[t].find(n=>n.id==e.id)){o[t].splice(o[t].indexOf(e),1);let n=o[t];w({field:t,value:n}).catch(a=>{console.log(a)}),A(o),this.refresh(this.$route.params.aid,!0)}else{o[t].push(e);let n=o[t];w({field:t,value:n}).then(()=>{this.refresh(this.$route.params.aid,!0)}).catch(a=>{console.log(a)}),A(o)}}else console.log("Not Logged In")},isRepeat(e){let t=this.albums.indexOf(e);if(t==0)return!1;if(t!=-1){let o=this.albums[t-1];return e.name==o.name}},compareDates(e,t){let o=new Date(e.release_date),n=new Date(t.release_date),a=o<n;return this.sortByNewest&&(a=o>n),a?-1:o===n?0:1},sortBy(e){this.sortByNewest=e,this.refresh(this.$route.params.aid,!0)},goToNewArtist(e){this.loggedIn&&w({field:"suggestedArtists",value:p().suggestedArtists}).catch(t=>{console.log(t)}),this.$router.push({name:"ArtistPage",params:{aid:e}}),this.refresh(e,!1)},isLikedAlbum(e){return this.checkLike(e,p().likedAlbums)},isLikedArtist(e){return this.checkLike(e,p().likedArtists)},checkLike(e,t){return this.loggedIn&&t.length>0?t.find(o=>o.id==e.id):!1},recommendArtist(){this.loggedIn?(v(this),H({artist:this.artist}).then(e=>{console.log(e.data),g()}).catch(e=>{console.log(e),g()})):console.log("Not Logged In")}}},r=e=>(j("data-v-1a271b3f"),e=e(),F(),e),J={class:"px-4 py-5 text-center",style:{color:"white","background-color":"black"}},K={class:"display-5 fw-bold artistName",style:{"padding-top":"10%","font-size":"55px"}},Q=r(()=>s("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"},null,-1)),W={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"1DB954"}},X=r(()=>s("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),Y=[X],Z={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"white","font-size":"48px"}},tt=r(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),et=[tt],st={class:"col-lg-6 mx-auto"},ot={class:"artistGenre"},lt={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},nt=r(()=>s("br",null,null,-1)),it=r(()=>s("br",null,null,-1)),at=r(()=>s("br",null,null,-1)),rt={class:"col-lg-6 mx-auto"},dt={class:"btn-group btn-group-toggle","data-toggle":"buttons"},ct=r(()=>s("br",null,null,-1)),ht=r(()=>s("br",null,null,-1)),gt=r(()=>s("br",null,null,-1)),ut={style:{"background-color":"black"}},ft={class:"row"},_t={key:0},pt=["src"],mt=["onClick"],bt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"1DB954"}},kt=r(()=>s("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),wt=[kt],vt={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"white"}},yt=r(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),At=[yt],xt={class:"col-2.5"},Ct={style:{"font-size":"14px"}},Rt={style:{"font-size":"12px"}};function Bt(e,t,o,n,a,l){const d=D("router-link");return c(),h("section",J,[s("h1",K,[Q,m(d,{type:"button",class:"fa fa-angle-double-left",style:{"font-size":"48px",color:"white","background-color":"black","text-decoration":"none","text-indent":"20px"},to:"/Search"}),k(" "+_(this.artist.name)+" ",1),s("button",{onClick:t[0]||(t[0]=i=>l.toggleLikeArtist(this.artist)),type:"button",class:"btn btn",style:{"border-color":"black"}},[l.isLikedArtist(this.artist)?(c(),h("svg",W,Y)):(c(),h("svg",Z,et))]),s("button",{onClick:t[1]||(t[1]=(...i)=>l.recommendArtist&&l.recommendArtist(...i)),type:"button",class:"btn btn",style:{"border-color":"black"}},"Recommended To Listeners")]),s("div",st,[s("p",ot,_(this.genres),1),s("div",lt,[s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[2]||(t[2]=i=>l.goToNewArtist(this.mostRelated.id))},"Related Artist: "+_(this.mostRelated.name),1),s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[3]||(t[3]=i=>l.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+_(this.leastRelated.name),1)])]),nt,it,at,s("div",rt,[s("div",dt,[s("label",{class:x(["btn btn-secondary",{active:this.sortByNewest}])},[s("input",{type:"radio",style:{display:"none"},id:"Newest",autocomplete:"off",checked:"",onClick:t[4]||(t[4]=i=>l.sortBy(!0))}),k(" Newest ")],2),s("label",{class:x(["btn btn-secondary",{active:!this.sortByNewest}])},[s("input",{type:"radio",style:{display:"none"},id:"Oldest",autocomplete:"off",onClick:t[5]||(t[5]=i=>l.sortBy(!1))}),k(" Oldest ")],2)])]),ct,ht,gt,s("ul",ut,[(c(!0),h(N,null,$(this.albums,i=>(c(),h("li",null,[s("div",ft,[this.isRepeat(i)?O("",!0):(c(),h("div",_t,[s("img",{src:i.images[0].url,alt:"Album Cover"},null,8,pt),s("button",{onClick:It=>l.toggleLikeAlbum(i),type:"button",class:"btn btn",style:{position:"absolute"}},[l.isLikedAlbum(i)?(c(),h("svg",bt,wt)):(c(),h("svg",vt,At))],8,mt)])),s("div",xt,[s("h1",Ct,_(i.name),1),s("h3",Rt,_(i.release_date),1)])])]))),256))])])}const I=P(q,[["render",Bt],["__scopeId","data-v-1a271b3f"]]),Lt={class:"wrapper"},Nt={name:"ArtistPage",components:{TheHeader:B,ArtistPageBody:I,TheFooter:L}},zt=Object.assign(Nt,{setup(e){return(t,o)=>(c(),h(N,null,[s("header",null,[m(B),s("div",Lt,[m(I)])]),s("main",null,[m(L)])],64))}});export{zt as default};
