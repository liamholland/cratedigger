import{g as S,h as u,b as B,r as k,i as m,j as w,u as P,e as f,s as v,T as y,f as L}from"./TheFooter-9aec6e74.js";import{_ as I,o as r,c as d,a as o,t as g,F as C,i as N,h as T,p as $,e as D,f as p}from"./index-a9f86f39.js";const _=S(B),M=u(_,"getSpotifyToken"),z=u(_,"getArtist"),F=u(_,"getAlbums"),A=u(_,"getRelatedArtists"),G=u(_,"getUnrelatedArtists"),x=u(_,"updateProfile"),U={data(){return{artist:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:""}},created(){this.refresh(this.$route.params.aid,!1)},methods:{refresh(t,e){M().then(s=>{z({token:s.data.access_token,id:t}).then(i=>{this.artist=i.data,this.genres="",i.data.genres.forEach(a=>{this.genres+=a+" - "}),F({token:s.data.access_token,id:t}).then(a=>{this.albums=a.data.items.sort(this.compareDates),e||A({token:s.data.access_token,id:t}).then(n=>{let l=0;do if(this.mostRelated=n.data.artists[l],l++,l==20){A({token:s.data.access_token,id:n.data.artists[19].id}).then(c=>{this.mostRelated=c.data.artists[0]});return}while(k(this.mostRelated.id));G({token:s.data.access_token,limit:20,genres:i.data.genres,backup:this.lastSuggestedGenre}).then(c=>{console.log(c.data),this.lastSuggestedGenre=c.data.genre;let b=0;do this.leastRelated=c.data.artists[b],b++;while(k(this.leastRelated.id))}).catch(c=>{console.log(c)})}).catch(n=>{console.log(n)})}).catch(a=>{console.log(a)})}).catch(i=>{console.log(i)})}).catch(s=>{console.log(s)})},toggleLikeAlbum(t){this.toggleLike(t,"likedAlbums")},toggleLikeArtist(t){this.toggleLike(t,"likedArtists")},toggleLike(t,e){if(m()){let s=f();if(s[e].find(i=>i.id==t.id)){s[e].splice(s[e].indexOf(t),1);let i=s[e];x({id:w(),field:e,value:i}).then(a=>{this.refresh(this.$route.params.aid,!0)}).catch(a=>{console.log(a)}),v(s)}else{s[e].push(t);let i=s[e];x({id:w(),field:e,value:i}).then(a=>{this.refresh(this.$route.params.aid,!0)}).catch(a=>{console.log(a)}),v(s)}}else console.log("Not Logged In")},isRepeat(t){let e=this.albums.indexOf(t);if(e==0)return!1;if(e!=-1){let s=this.albums[e-1];return t.name==s.name}},compareDates(t,e){let s=new Date(t.release_date),i=new Date(e.release_date);return s>i?-1:s>i?1:0},goToNewArtist(t){P(t),this.$router.push({name:"ArtistPage",params:{aid:t}}),this.refresh(t,!1)},isLikedAlbum(t){return this.checkLike(t,f().likedAlbums)},isLikedArtist(t){return this.checkLike(t,f().likedArtists)},checkLike(t,e){return m()?e.find(s=>s.id==t.id):!1}}},h=t=>($("data-v-223c36fb"),t=t(),D(),t),Z={class:"px-4 py-5 text-center",style:{color:"white","background-color":"black"}},j={class:"display-5 fw-bold artistName",style:{"padding-top":"10%","font-size":"55px"}},O={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heartbreak-fill",viewBox:"0 0 16 16"},V=h(()=>o("path",{d:"M8.931.586 7 3l1.5 4-2 3L8 15C22.534 5.396 13.757-2.21 8.931.586ZM7.358.77 5.5 3 7 7l-1.5 3 1.815 4.537C-6.533 4.96 2.685-2.467 7.358.77Z"},null,-1)),E=[V],H={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},q=h(()=>o("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),J=[q],K={class:"col-lg-6 mx-auto"},Q={class:"artistGenre"},W={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},X=h(()=>o("br",null,null,-1)),Y=h(()=>o("br",null,null,-1)),tt=h(()=>o("br",null,null,-1)),et={style:{"background-color":"black"}},st={class:"row"},ot={key:0},it=["src"],lt=["onClick"],at={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heartbreak-fill",viewBox:"0 0 16 16"},nt=h(()=>o("path",{d:"M8.931.586 7 3l1.5 4-2 3L8 15C22.534 5.396 13.757-2.21 8.931.586ZM7.358.77 5.5 3 7 7l-1.5 3 1.815 4.537C-6.533 4.96 2.685-2.467 7.358.77Z"},null,-1)),rt=[nt],dt={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},ct=h(()=>o("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),ht=[ct],gt={class:"col-2.5"},ut={style:{"font-size":"14px"}},_t={style:{"font-size":"12px"}};function ft(t,e,s,i,a,n){return r(),d("section",Z,[o("h1",j,g(this.artist.name),1),o("button",{onClick:e[0]||(e[0]=l=>n.toggleLikeArtist(this.artist)),type:"button",class:"btn btn-outline-danger",style:{position:"absolute",left:"72.5%"}},[n.isLikedArtist(this.artist)?(r(),d("svg",O,E)):(r(),d("svg",H,J))]),o("div",K,[o("p",Q,g(this.genres),1),o("div",W,[o("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:e[1]||(e[1]=l=>n.goToNewArtist(this.mostRelated.id))},"Related Artist: "+g(this.mostRelated.name),1),o("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:e[2]||(e[2]=l=>n.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+g(this.leastRelated.name),1)])]),X,Y,tt,o("ul",et,[(r(!0),d(C,null,N(this.albums,l=>(r(),d("li",null,[o("div",st,[this.isRepeat(l)?T("",!0):(r(),d("div",ot,[o("img",{src:l.images[0].url,alt:"Album Cover"},null,8,it),o("button",{onClick:c=>n.toggleLikeAlbum(l),type:"button",class:"btn btn-outline-danger",style:{position:"absolute"}},[n.isLikedAlbum(l)?(r(),d("svg",at,rt)):(r(),d("svg",dt,ht))],8,lt)])),o("div",gt,[o("h1",ut,g(l.name),1),o("h3",_t,g(l.release_date),1)])])]))),256))])])}const R=I(U,[["render",ft],["__scopeId","data-v-223c36fb"]]),pt={class:"wrapper"},bt={name:"ArtistPage",components:{TheHeader:y,ArtistPageBody:R,TheFooter:L}},wt=Object.assign(bt,{setup(t){return(e,s)=>(r(),d(C,null,[o("header",null,[p(y),o("div",pt,[p(R)])]),o("main",null,[p(L)])],64))}});export{wt as default};
