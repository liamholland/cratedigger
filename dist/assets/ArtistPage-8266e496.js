import{g as v,h as u,c as w,r as p,u as A,T as b,a as f}from"./TheFooter-adc48960.js";import{_ as y,o as c,c as h,b as e,t as r,F as k,i as N,g as S,p as x,h as T,d as g}from"./index-4ac4c00f.js";const _=v(w),$=u(_,"getSpotifyToken"),C=u(_,"getArtist"),B=u(_,"getAlbums"),F=u(_,"getRelatedArtists"),G=u(_,"getUnrelatedArtists"),P={data(){return{artistName:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:""}},created(){this.refresh(this.$route.params.aid)},methods:{refresh(t){$().then(s=>{C({token:s.data.access_token,id:t}).then(a=>{this.artistName=a.data.name,this.genres="",a.data.genres.forEach(o=>{this.genres+=o+" , "}),B({token:s.data.access_token,id:t}).then(o=>{this.albums=o.data.items.sort(this.compareDates),F({token:s.data.access_token,id:t}).then(d=>{let l=0;do if(this.mostRelated=d.data.artists[l],l++,l==20){this.refresh(d.data.artists[19].id);return}while(p(this.mostRelated.id));G({token:s.data.access_token,limit:20,genres:a.data.genres,backup:this.lastSuggestedGenre}).then(n=>{console.log(n.data),this.lastSuggestedGenre=n.data.genre;let m=0;do this.leastRelated=n.data.artists[m],m++;while(p(this.leastRelated.id))}).catch(n=>{console.log(n)})}).catch(d=>{console.log(d)})}).catch(o=>{console.log(o)})}).catch(a=>{console.log(a)})}).catch(s=>{console.log(s)})},isRepeat(t){let s=this.albums.indexOf(t);if(s==0)return!1;if(s!=-1){let a=this.albums[s-1];return t.name==a.name}},compareDates(t,s){let a=new Date(t.release_date),o=new Date(s.release_date);return a<o?-1:a>o?1:0},goToNewArtist(t){A(t),this.$router.push({name:"ArtistPage",params:{aid:t}}),this.refresh(t)}}},i=t=>(x("data-v-27164d3a"),t=t(),T(),t),D={class:"body"},I=i(()=>e("br",null,null,-1)),U={class:"artistName"},V={class:"artistGenre"},E=i(()=>e("br",null,null,-1)),O=i(()=>e("br",null,null,-1)),j=i(()=>e("br",null,null,-1)),z=i(()=>e("br",null,null,-1)),H={style:{"background-color":"black"}},L={key:0,class:"albumResult"},M=["src"],q={class:"albumInfo"},J=i(()=>e("button",{type:"button",class:"btn btn-outline-danger",style:{position:"absolute",left:"72.5%"}},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},[e("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"})])],-1));function K(t,s,a,o,d,l){return c(),h("section",D,[I,e("p",U,r(this.artistName),1),e("p",V,r(this.genres),1),e("button",{class:"btn-get-started",onClick:s[0]||(s[0]=n=>l.goToNewArtist(this.mostRelated.id))},"Related Artist: "+r(this.mostRelated.name),1),e("button",{class:"btn-get-started",onClick:s[1]||(s[1]=n=>l.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+r(this.leastRelated.name),1),E,O,j,z,e("ul",H,[(c(!0),h(k,null,N(this.albums,n=>(c(),h("li",null,[this.isRepeat(n)?S("",!0):(c(),h("div",L,[e("img",{src:n.images[0].url,alt:"Album Cover"},null,8,M),e("div",q,[J,e("h1",null,r(n.name),1),e("h3",null,r(n.release_date),1)])]))]))),256))])])}const R=y(P,[["render",K],["__scopeId","data-v-27164d3a"]]),Q={class:"wrapper"},W={name:"ArtistPage",components:{TheHeader:b,ArtistPageBody:R,TheFooter:f}},Z=Object.assign(W,{setup(t){return(s,a)=>(c(),h(k,null,[e("header",null,[g(b),e("div",Q,[g(R)])]),e("main",null,[g(f)])],64))}});export{Z as default};
