import{g as v,a as A,h as d,b as m,i as u,j as I,e as a,r as x,k as w,u as h,s as R,T as k,f as y}from"./TheFooter-639380c6.js";import{_ as T,o as l,c,a as t,t as p,b as _,p as C,e as B,f as r,F}from"./index-6515ee94.js";const g=v(m);A(m);const N=d(g,"getSpotifyToken"),P=d(g,"recommendArtists"),f=d(g,"updateProfile"),j={data(){return{token:"",currentSuggestion:{},loggedIn:!1,genres:"",loading:!1}},beforeCreate(){u()?(this.loggedIn=!0,N().then(e=>{this.token=e.data.access_token,this.refreshRecommendation()}).catch(e=>{console.log(e)})):this.loggedIn=!1},mounted(){this.loggedIn=u()},methods:{refreshRecommendation(){this.loading||(I(this),this.loading=!0),P({token:this.token,user:a()}).then(e=>{console.log(e.data),x(e.data.artist)?this.refreshRecommendation():(this.currentSuggestion=e.data.artist,this.genres="",this.currentSuggestion.genres.forEach(s=>{this.genres+=s+" , "}),w(),this.loading=!1)})},likeArtist(){if(this.currentSuggestion!=null){let e=a();console.log(e),e.likedArtists.push(this.currentSuggestion);let s=e.likedArtists;R(e),h(this.currentSuggestion),s!==null&&f({field:"likedArtists",value:s}).then(o=>{console.log(o.data),this.refreshRecommendation()}).catch(o=>{console.log(o)})}},skipArtist(){if(this.currentSuggestion!=null){h(this.currentSuggestion);let e=a().suggestedArtists;e!==null&&f({field:"suggestedArtists",value:e}).then(s=>{console.log(s.data),this.refreshRecommendation()}).catch(s=>{console.log(s)})}}},computed:{artistImage(){return JSON.stringify(this.currentSuggestion)!="{}"?this.currentSuggestion.images[0].url:""}}},z=e=>(C("data-v-0a7569e5"),e=e(),B(),e),D={key:0},L={class:"px-4 py-5 text-center",style:{width:"100vw",height:"100vh",color:"white","background-color":"black"}},O={class:"display-5 fw-bold",style:{"padding-top":"10%"}},V={class:"col-lg-6 mx-auto"},E={class:"lead mb-4"},H={class:"container px-1"},$=["src","alt"],G={key:1},J={class:"px-4 py-5 text-center",style:{width:"100vw",height:"100vh",color:"white","background-color":"black"}},Y={class:"col-lg-6 mx-auto",style:{"padding-top":"10%"}},q={class:"lead mb-4",style:{color:"white"}},K={style:{display:"inline"}},M={style:{display:"inline"}},Q=z(()=>t("div",{class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},null,-1));function U(e,s,o,Z,S,n){return S.loggedIn?(l(),c("div",D,[t("section",L,[t("h1",O,"Artist: "+p(this.currentSuggestion.name),1),t("div",V,[t("p",E,"Genres: "+p(this.genres),1),t("div",H,[t("button",{style:{"background-color":"black","padding-left":"15px",border:"none","font-size":"150%"},onClick:s[0]||(s[0]=(...i)=>n.skipArtist&&n.skipArtist(...i))},"❌"),t("img",{src:n.artistImage,alt:this.currentSuggestion.name,class:"img-fluid rounded-3",width:"180",height:"180",loading:"lazy"},null,8,$),t("button",{style:{"background-color":"black","padding-right":"15px",border:"none","font-size":"150%"},onClick:s[1]||(s[1]=(...i)=>n.likeArtist&&n.likeArtist(...i))},"✅")])])])])):(l(),c("div",G,[t("section",J,[t("div",Y,[t("h4",q,[_("You are not logged into your account. To login click "),t("h3",K,[t("strong",null,[t("a",{onClick:s[2]||(s[2]=i=>e.opensignin())},"here")])]),_(" or to create an account click "),t("h3",M,[t("strong",null,[t("a",{onClick:s[3]||(s[3]=i=>e.opensignup())},"here")])])]),Q])])]))}const b=T(j,[["render",U],["__scopeId","data-v-0a7569e5"]]),W={class:"wrapper"},X={name:"HomeOne",components:{TheHeader:k,Recommender:b,TheFooter:y}},se=Object.assign(X,{setup(e){return(s,o)=>(l(),c(F,null,[t("header",null,[r(k),t("div",W,[r(b)])]),t("main",null,[r(y)])],64))}});export{se as default};
