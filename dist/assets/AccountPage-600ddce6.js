import{g as C,a as B,h as f,b as U,d as E,o as w,c as F,e as R,s as r,j as I,k as d,T as A,f as L}from"./TheFooter-db175250.js";import{_ as S,o as i,c as l,a as t,w as b,v as k,t as u,F as g,i as _,h as O,b as m,p as N,e as V,f as x}from"./index-a811184e.js";const p=C(U),q=B(U),D=f(p,"getProfileInfo"),P=f(p,"updateProfile"),j=f(p,"getUser"),M=f(p,"addListener"),z=f(p,"removeListener"),v=f(p,"getListeningTo"),H={data(){return{email:"",password:"",loggedIn:!1,displayAlbums:!1,displayRecs:!1,accountInfo:{},listeningTo:[],searchedUser:{},hasResult:!1,message:"",input:"",typing:!1,newBio:"",newURL:""}},created(){E(q,s=>{s?this.loggedIn=!0:this.loggedIn=!1})()},watch:{loggedIn(){this.refresh()},"$route.params":{handler(){this.refresh()}}},methods:{opensignin(){w(0)},opensignup(){w(1)},openProfileEdit(){w(2)},closeProfileEdit(){F(2)},refresh(){this.accountInfo={},this.$route.params.name&&JSON.stringify(R())=="{}"?(this.loggedIn=!0,console.log("Getting Profile From Server"),D({field:null}).then(e=>{r(e.data),this.accountInfo=e.data,v().then(s=>{this.listeningTo=s.data,console.log(this.listeningTo)}).catch(s=>{console.log(s)})}).catch(e=>{console.log(e.code),console.log(e.message)})):this.$route.params.name?(this.loggedIn=!0,this.accountInfo=R(),v().then(e=>{this.listeningTo=e.data,console.log(this.listeningTo)}).catch(e=>{console.log(e)})):this.loggedIn=!1},showAlbums(e){this.displayAlbums=e,this.displayRecs=!1},showRecommendations(){this.displayAlbums=!1,this.displayRecs=!0},updateProfile(){I(this),this.newBio.length>0&&this.newURL.length>0?(this.updateBio(),this.updatePFP()):this.newBio.length>0?this.updateBio():this.newURL.length>0&&this.updatePFP(),this.closeProfileEdit(),this.refresh()},updateBio(){P({field:"bio",value:this.newBio}).then(e=>{console.log(e.data.body),this.accountInfo.bio=this.newBio,r(this.accountInfo),this.newBio="",d()}).catch(e=>{console.log(e.code,e.message)})},updatePFP(){P({field:"pfpURL",value:this.newURL}).then(e=>{console.log(e.data.body),this.accountInfo.pfpURL=this.newURL,r(this.accountInfo),this.newURL="",d()}).catch(e=>{console.log(e.code,e.message)})},search(e){this.typing||(this.typing=!0,setTimeout(()=>this.sendSearchRequest(e),150))},sendSearchRequest(e){this.typing=!1,e.length>0?j({username:e}).then(s=>{if(s.data.code===1){console.log(s.data.body),this.hasResult=!1,this.searchedUser=={};return}else s.data.code===0&&(console.log(s.data.userData),this.searchedUser=s.data.userData,this.accountInfo.listeningTo.find(c=>c==this.searchedUser.id)?(this.message=`Already Listening to ${this.searchedUser.username}`,this.hasResult=!1):(this.hasResult=!0,this.message="No Such User"))}).catch(s=>{console.log(s)}):(this.message="",this.hasResult=!1,this.searchedUser={})},follow(){this.hasResult&&(I(this),this.accountInfo.hasOwnProperty("listeningTo")||(this.accountInfo.listeningTo=[]),this.hasResult=!1,this.accountInfo.listeningTo.push(this.searchedUser.id),r(this.accountInfo),M({id:this.searchedUser.id}).then(e=>{console.log(e),this.searchedUser={},v().then(s=>{this.listeningTo=s.data,d()}).catch(s=>{console.log(s),d()})}).catch(e=>{console.log(e),d()}))},unfollow(e){I(this),this.accountInfo.listeningTo.splice(this.accountInfo.listeningTo.indexOf(e),1),this.listeningTo=this.accountInfo.listeningTo,r(this.accountInfo),z({id:e}).then(s=>{console.log(s.data),v().then(c=>{this.listeningTo=c.data,d()}).catch(c=>{console.log(c),d()})}).catch(s=>{console.log(s),d()})},notAlreadyLiked(e){return!this.accountInfo.likedArtists.find(s=>s.id==e)},viewArtist(e){let s=[];this.accountInfo.recommendedArtists.length==1?this.accountInfo.recommendedArtists=[]:s=this.accountInfo.recommendedArtists.splice(this.accountInfo.recommendedArtists.indexOf(this.accountInfo.recommendedArtists.find(c=>c.id==e)),1),r(this.accountInfo),P({field:"recommendedArtists",value:s}).then(c=>{console.log(c)}),this.$router.push({name:"ArtistPage",params:{aid:e}})},getOtherPFP(e){return e==""?"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png":e}},computed:{pfpURL(){return JSON.stringify(this.accountInfo)=="{}"||this.accountInfo.pfpURL==""?"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png":this.accountInfo.pfpURL}}},a=e=>(N("data-v-ef58cb29"),e=e(),V(),e),G={key:0},J={id:"myModal1",class:"modal"},K={style:{"align-items":"center"},class:"modal-content"},W=a(()=>t("h1",{class:"h3 mb-3 fw-normal",style:{color:"white","font-size":"40px"}},"Edit Profile",-1)),X={class:"form-floating"},Y=a(()=>t("label",{for:"floatingInput"},"Edit Bio",-1)),Q=a(()=>t("br",null,null,-1)),Z={class:"form-floating"},$=a(()=>t("label",{for:"floatingInput"},"Change Profile Picture",-1)),tt=a(()=>t("br",null,null,-1)),st=a(()=>t("br",null,null,-1)),et=a(()=>t("head",null,[t("meta",{charset:"UTF-8"}),t("meta",{"http-equiv":"X-UA-Compatible",content:"IE=edge"}),t("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})],-1)),ot={class:"header__wrapper",style:{"background-color":"black"}},nt={class:"rounded-top text-white cols__container backg"},it={class:"left__col"},lt={class:"right__col"},at={class:"row"},ct={class:"col d-flex flex-row"},dt={class:"pfpBio",style:{"background-color":"transparent"}},ht={class:"pfp"},rt=["src"],ut={class:"bio"},gt={class:"display-5 fw-bold",style:{"font-size":"225%"}},ft={class:"col"},pt={class:"listeningTo"},_t=a(()=>t("h4",null,"Listening To:",-1)),mt={class:"listenList"},vt=["onClick"],yt=["src"],wt={class:"col"},It={key:0,class:"search"},bt=["src"],kt={key:1,class:"mx-auto"},xt=a(()=>t("br",null,null,-1)),Pt={class:"row"},Rt={class:"col d-flex justify-content-center"},Ut={class:"list",style:{"text-indent":"20px",cursor:"pointer"}},At={class:"list",style:{"text-indent":"20px",cursor:"pointer"}},Lt={class:"list",style:{"text-indent":"20px",cursor:"pointer"}},Tt=a(()=>t("br",null,null,-1)),Ct={class:"row"},Bt={class:"col"},Et={key:0,class:"photos"},Ft=["src","alt","onClick"],St={key:1,class:"photos"},Ot=["src","alt","onClick"],Nt={key:2,class:"photos"},Vt=["src","alt","onClick"],qt=a(()=>t("div",{class:"col-lg-6 mx-auto",style:{"padding-top":"10%",width:"100vw",height:"60vh","background-color":"#8C3E3E"}},null,-1)),Dt={key:1},jt={class:"px-4 py-5 text-center backg"},Mt={class:"col-lg-6 mx-auto",style:{"padding-top":"10%"}},zt={class:"lead mb-4",style:{color:"white"}},Ht=a(()=>t("br",null,null,-1)),Gt={style:{display:"inline"}},Jt=a(()=>t("br",null,null,-1)),Kt={style:{display:"inline"}},Wt=a(()=>t("div",{class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},null,-1)),Xt=a(()=>t("div",{class:"col-lg-6 mx-auto gap",style:{"padding-top":"10%",width:"100vw",height:"60vh"}},null,-1));function Yt(e,s,c,$t,h,n){return i(),l(g,null,[this.loggedIn?(i(),l("div",G,[t("div",J,[t("div",K,[t("span",{class:"close",onClick:s[0]||(s[0]=o=>n.closeProfileEdit())},"Ã—"),W,t("div",X,[b(t("input",{class:"form-control",id:"floatingInput",required:"","onUpdate:modelValue":s[1]||(s[1]=o=>h.newBio=o)},null,512),[[k,h.newBio]]),Y]),Q,t("div",Z,[b(t("input",{class:"form-control",id:"floatingInput",required:"","onUpdate:modelValue":s[2]||(s[2]=o=>h.newURL=o)},null,512),[[k,h.newURL]]),$]),tt,t("a",{onClick:s[3]||(s[3]=(...o)=>n.updateProfile&&n.updateProfile(...o)),class:"btn-get-started"},"Submit"),st])]),et,t("body",null,[t("div",ot,[t("div",nt,[t("div",it,[t("div",lt,[t("div",at,[t("div",ct,[t("div",dt,[t("div",ht,[t("img",{src:this.pfpURL,alt:"Generic placeholder image",class:"img-fluid img-thumbnail mt-4 mb-2",style:{height:"150px",width:"150px","z-index":"1"}},null,8,rt),t("button",{type:"button",class:"btn-get-started",onClick:s[4]||(s[4]=o=>n.openProfileEdit())}," Edit ")]),t("div",ut,[t("h2",gt,u(this.accountInfo.username),1),t("p",null,u(this.accountInfo.bio),1),t("h5",null,"Listeners: "+u(this.accountInfo.listenerCount),1)])])]),t("div",ft,[t("div",pt,[_t,t("div",mt,[(i(!0),l(g,null,_(this.listeningTo,o=>(i(),l("div",{onClick:y=>n.unfollow(o.id)},[t("img",{src:n.getOtherPFP(o.pfpURL),style:{height:"50px",width:"50px"},alt:"PFP"},null,8,yt),t("h4",null,u(o.username),1)],8,vt))),256))])])]),t("div",wt,[b(t("input",{class:"input-search mx-auto","onUpdate:modelValue":s[5]||(s[5]=o=>h.input=o),onKeyup:s[6]||(s[6]=o=>n.search(this.input)),placeholder:"Whos recommendations do you want to listen to?",style:{"max-width":"90%",height:"50px"}},null,544),[[k,h.input]]),h.hasResult?(i(),l("div",It,[t("div",{onClick:s[7]||(s[7]=(...o)=>n.follow&&n.follow(...o))},[t("img",{src:n.getOtherPFP(this.searchedUser.pfp),style:{height:"50px",width:"50px"},alt:"PFP"},null,8,bt),t("h4",null,u(this.searchedUser.username),1)])])):(i(),l("div",kt,[t("h4",null,u(this.message),1)]))])])]),xt,t("div",Pt,[t("div",Rt,[t("nav",null,[t("ul",null,[t("li",Ut,[t("a",{class:"text",onClick:s[8]||(s[8]=o=>n.showAlbums(!0))},"Liked Albums")]),t("li",At,[t("a",{class:"text",onClick:s[9]||(s[9]=o=>n.showAlbums(!1))},"Liked Artists")]),t("li",Lt,[t("a",{class:"text",onClick:s[10]||(s[10]=(...o)=>n.showRecommendations&&n.showRecommendations(...o))},"Recommended Artists")])]),Tt])])]),t("div",Ct,[t("div",Bt,[this.displayAlbums?(i(),l("div",Et,[(i(!0),l(g,null,_(this.accountInfo.likedAlbums,o=>(i(),l("img",{src:o.images[0].url,alt:o.name,onClick:y=>this.$router.push({name:"ArtistPage",params:{aid:o.artists[0].id}})},null,8,Ft))),256))])):this.displayRecs?(i(),l("div",St,[(i(!0),l(g,null,_(this.accountInfo.recommendedArtists,o=>(i(),l("div",null,[n.notAlreadyLiked(o.id)?(i(),l("img",{key:0,src:o.images[0].url,alt:o.name,onClick:y=>n.viewArtist(o.id)},null,8,Ot)):O("",!0)]))),256))])):(i(),l("div",Nt,[(i(!0),l(g,null,_(this.accountInfo.likedArtists,o=>(i(),l("img",{src:o.images[0].url,alt:o.name,onClick:y=>this.$router.push({name:"ArtistPage",params:{aid:o.id}})},null,8,Vt))),256))]))])])])])]),qt])])):(i(),l("div",Dt,[t("section",jt,[t("div",Mt,[t("h4",zt,[m("You are not logged into your account."),Ht,m(" To login click "),t("h3",Gt,[t("strong",null,[t("a",{class:"here",onClick:s[11]||(s[11]=o=>n.opensignin())},"HERE")])]),Jt,m(" or to create an account click "),t("h3",Kt,[t("strong",null,[t("a",{class:"here",onClick:s[12]||(s[12]=o=>n.opensignup())},"HERE")])]),m(". ")]),Wt])])])),Xt],64)}const T=S(H,[["render",Yt],["__scopeId","data-v-ef58cb29"]]),Qt={class:"wrapper"},Zt={name:"AboutUs",components:{TheHeader:A,AccountPageBody:T,TheFooter:L}},es=Object.assign(Zt,{setup(e){return(s,c)=>(i(),l(g,null,[t("header",null,[x(A),t("div",Qt,[x(T)])]),t("main",null,[x(L)])],64))}});export{es as default};
