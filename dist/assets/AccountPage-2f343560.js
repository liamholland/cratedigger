import{g as B,a as F,h,b as R,d as S,o as y,c as E,e as x,s as d,j as A,k as v,T as L,f as T}from"./TheFooter-45d480bb.js";import{_ as N,o as i,a as l,b as e,w as b,v as w,t as r,F as f,i as p,g as O,f as U,p as V,h as D,d as I}from"./index-259201ba.js";const u=B(R),P=F(R),q=h(u,"getProfileInfo"),k=h(u,"updateProfile"),z=h(u,"getUser"),M=h(u,"addListener"),j=h(u,"removeListener"),m=h(u,"getListeningTo"),G={data(){return{email:"",password:"",loggedIn:!1,displayAlbums:!1,displayRecs:!1,accountInfo:{},listeningTo:[],searchedUser:{},hasResult:!1,message:"",newBio:"",newURL:""}},created(){S(P,t=>{t?this.loggedIn=!0:this.loggedIn=!1})()},watch:{loggedIn(){this.refresh()},"$route.params":{handler(){this.refresh()}}},methods:{opensignin(){y(0)},opensignup(){y(1)},openProfileEdit(){y(2)},closeProfileEdit(){E(2)},refresh(){this.accountInfo={},this.$route.params.name&&JSON.stringify(x())=="{}"?(this.loggedIn=!0,console.log("Getting Profile From Server"),q({field:null}).then(s=>{d(s.data),this.accountInfo=s.data,m().then(t=>{this.listeningTo=t.data,console.log(this.listeningTo)}).catch(t=>{console.log(t)})}).catch(s=>{console.log(s.code),console.log(s.message)})):this.$route.params.name?(this.loggedIn=!0,this.accountInfo=x(),m().then(s=>{this.listeningTo=s.data,console.log(this.listeningTo)}).catch(s=>{console.log(s)})):this.loggedIn=!1},showAlbums(s){this.displayAlbums=s,this.displayRecs=!1},showRecommendations(){console.log(this.accountInfo.recommendedArtists),this.displayAlbums=!1,this.displayRecs=!0},logout(){A(this),P.signOut(),d({}),this.loggedIn=!1,v(),this.$router.push({path:"/AccountPage/"})},updateProfile(){A(this),this.newBio.length>0&&this.newURL.length>0?(this.updateBio(),this.updatePFP()):this.newBio.length>0?this.updateBio():this.newURL.length>0&&this.updatePFP(),this.closeProfileEdit(),this.refresh()},updateBio(){k({field:"bio",value:this.newBio}).then(s=>{console.log(s.data.body),this.accountInfo.bio=this.newBio,d(this.accountInfo),this.newBio="",v()}).catch(s=>{console.log(s.code,s.message)})},updatePFP(){k({field:"pfpURL",value:this.newURL}).then(s=>{console.log(s.data.body),this.accountInfo.pfpURL=this.newURL,d(this.accountInfo),this.newURL="",v()}).catch(s=>{console.log(s.code,s.message)})},search(s){s.length>0?z({username:s}).then(t=>{if(t.data.code===1){console.log(t.data.body),this.hasResult=!1,this.searchedUser=={};return}else t.data.code===0&&(console.log(t.data.userData),this.searchedUser=t.data.userData,this.accountInfo.listeningTo.find(c=>c==this.searchedUser.id)?(this.message=`Already Listening to ${this.searchedUser.username}`,this.hasResult=!1):(this.hasResult=!0,this.message=""))}).catch(t=>{console.log(t)}):(this.message="No Such User",this.hasResult=!1,this.searchedUser={})},follow(){this.hasResult&&(this.accountInfo.hasOwnProperty("listeningTo")||(this.accountInfo.listeningTo=[]),this.hasResult=!1,this.accountInfo.listeningTo.push(this.searchedUser.id),d(this.accountInfo),M({id:this.searchedUser.id}).then(s=>{console.log(s),this.searchedUser={},m().then(t=>{this.listeningTo=t.data}).catch(t=>{console.log(t)})}).catch(s=>{console.log(s)}))},unfollow(s){this.accountInfo.listeningTo.splice(this.accountInfo.listeningTo.indexOf(s),1),this.listeningTo=this.accountInfo.listeningTo,d(this.accountInfo),j({id:s}).then(t=>{console.log(t.data),m().then(c=>{this.listeningTo=c.data}).catch(c=>{console.log(c)})}).catch(t=>{console.log(t)})},notAlreadyLiked(s){return!this.accountInfo.likedArtists.find(t=>t.id==s)},viewArtist(s){let t=[];this.accountInfo.recommendedArtists.length==1?this.accountInfo.recommendedArtists=[]:t=this.accountInfo.recommendedArtists.splice(this.accountInfo.recommendedArtists.indexOf(this.accountInfo.recommendedArtists.find(c=>c.id==s)),1),d(this.accountInfo),k({field:"recommendedArtists",value:t}).then(c=>{console.log(c)}),this.$router.push({name:"ArtistPage",params:{aid:s}})}},computed:{pfpURL(){return JSON.stringify(this.accountInfo)!="{}"&&this.accountInfo.pfpURL!=null?this.accountInfo.pfpURL:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png"}}},a=s=>(V("data-v-ff6b284b"),s=s(),D(),s),J={key:0},$={id:"myModal1",class:"modal"},H={style:{"align-items":"center"},class:"modal-content"},K=a(()=>e("h1",{class:"h3 mb-3 fw-normal",style:{color:"white","font-size":"40px"}},"Edit Profile",-1)),W={class:"form-floating"},X=a(()=>e("label",{for:"floatingInput"},"Edit Bio",-1)),Y=a(()=>e("br",null,null,-1)),Q={class:"form-floating"},Z=a(()=>e("label",{for:"floatingInput"},"Change Profile Picture",-1)),ee=a(()=>e("br",null,null,-1)),te=a(()=>e("br",null,null,-1)),se=a(()=>e("head",null,[e("meta",{charset:"UTF-8"}),e("meta",{"http-equiv":"X-UA-Compatible",content:"IE=edge"}),e("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})],-1)),oe={class:"header__wrapper",style:{"background-color":"black"}},ne={class:"cols__container",style:{"background-color":"#151515"}},ie={class:"right__col",style:{"background-color":"#151515"}},le={class:"left__col",style:{"background-color":"#151515"}},ae={class:"card",style:{"background-color":"#151515"}},ce={class:"rounded-top text-white d-flex flex-row",style:{"background-color":"#151515",height:"200px"}},de=a(()=>e("div",{class:"dropdown"},null,-1)),re={class:"ms-4 mt-5flex-column",style:{width:"150px","background-color":"#151515"}},he=["src"],ue={class:"ms-3",style:{"margin-top":"30px"}},ge={class:"display-5 fw-bold",style:{"font-size":"225%"}},fe=["onClick"],pe=["src"],me={key:0},_e=["src"],ye={key:1},ve=a(()=>e("br",null,null,-1)),be={class:"p-4 text-black",style:{"text-align":"left","background-color":"#151515"}},we={style:{"text-indent":"20px",cursor:"pointer"}},Ie={style:{"text-indent":"20px",cursor:"pointer"}},ke={style:{"text-indent":"20px",cursor:"pointer"}},xe=a(()=>e("br",null,null,-1)),Ae={key:0,class:"photos"},Ue=["src","alt","onClick"],Pe={key:1,class:"photos"},Re=["src","alt","onClick"],Le={key:2,class:"photos"},Te=["src","alt","onClick"],Ce=a(()=>e("br",null,null,-1)),Be=a(()=>e("div",{class:"col-lg-6 mx-auto",style:{"padding-top":"10%",width:"100vw",height:"60vh","background-color":"#151515"}},null,-1)),Fe={key:1},Se={class:"px-4 py-5 text-center",style:{width:"100vw",height:"100vh",color:"white","background-color":"black"}},Ee={class:"col-lg-6 mx-auto",style:{"padding-top":"10%"}},Ne={class:"lead mb-4",style:{color:"white"}},Oe={style:{display:"inline"}},Ve={style:{display:"inline"}},De=a(()=>e("div",{class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},null,-1));function qe(s,t,c,je,g,n){return this.loggedIn?(i(),l("div",J,[e("div",$,[e("div",H,[e("span",{class:"close",onClick:t[0]||(t[0]=o=>n.closeProfileEdit())},"Ã—"),K,e("div",W,[b(e("input",{class:"form-control",id:"floatingInput",required:"","onUpdate:modelValue":t[1]||(t[1]=o=>g.newBio=o)},null,512),[[w,g.newBio]]),X]),Y,e("div",Q,[b(e("input",{class:"form-control",id:"floatingInput",required:"","onUpdate:modelValue":t[2]||(t[2]=o=>g.newURL=o)},null,512),[[w,g.newURL]]),Z]),ee,e("a",{onClick:t[3]||(t[3]=(...o)=>n.updateProfile&&n.updateProfile(...o)),class:"btn-get-started"},"Submit"),te,e("a",{onClick:t[4]||(t[4]=(...o)=>n.logout&&n.logout(...o)),class:"btn-get-started"},"Sign out")])]),se,e("body",null,[e("div",oe,[e("div",ne,[e("div",ie,[e("div",le,[e("div",ae,[e("div",ce,[de,e("div",re,[e("img",{src:this.pfpURL,alt:"Generic placeholder image",class:"img-fluid img-thumbnail mt-4 mb-2",style:{height:"150px",width:"150px","z-index":"1"}},null,8,he),e("button",{type:"button",style:{"z-index":"1","background-color":"white","border-radius":"4px",border:"none",width:"150px"},onClick:t[5]||(t[5]=o=>n.openProfileEdit())}," Edit profile ")]),e("div",ue,[e("h2",ge,r(this.accountInfo.username),1),e("p",null,r(this.accountInfo.bio),1),e("h5",null,"Listeners: "+r(this.accountInfo.listenerCount),1)]),e("div",null,[(i(!0),l(f,null,p(this.listeningTo,o=>(i(),l("div",{onClick:_=>n.unfollow(o.id)},[e("img",{src:o.pfpURL,style:{height:"50px",width:"50px"},alt:"PFP"},null,8,pe),e("h4",null,r(o.username),1)],8,fe))),256))]),b(e("input",{class:"input-search","onUpdate:modelValue":t[6]||(t[6]=o=>s.input=o),onKeyup:t[7]||(t[7]=o=>n.search(this.input)),placeholder:"Who do you want to listen to?",style:{width:"20%",height:"50px"}},null,544),[[w,s.input]]),g.hasResult?(i(),l("div",me,[e("div",{onClick:t[8]||(t[8]=(...o)=>n.follow&&n.follow(...o))},[e("img",{src:this.searchedUser.pfp,style:{height:"50px",width:"50px"},alt:"PFP"},null,8,_e),e("h4",null,r(this.searchedUser.username),1)])])):(i(),l("div",ye,[e("h4",null,r(this.message),1)]))]),ve,e("div",be,[e("nav",null,[e("ul",null,[e("li",we,[e("a",{onClick:t[9]||(t[9]=o=>n.showAlbums(!0))},"Liked Albums")]),e("li",Ie,[e("a",{onClick:t[10]||(t[10]=o=>n.showAlbums(!1))},"Liked Artists")]),e("li",ke,[e("a",{onClick:t[11]||(t[11]=(...o)=>n.showRecommendations&&n.showRecommendations(...o))},"Recommended Artists")])]),xe]),this.displayAlbums?(i(),l("div",Ae,[(i(!0),l(f,null,p(this.accountInfo.likedAlbums,o=>(i(),l("img",{src:o.images[0].url,alt:o.name,onClick:_=>this.$router.push({name:"ArtistPage",params:{aid:o.artists[0].id}})},null,8,Ue))),256))])):this.displayRecs?(i(),l("div",Pe,[(i(!0),l(f,null,p(this.accountInfo.recommendedArtists,o=>(i(),l("div",null,[n.notAlreadyLiked(o.id)?(i(),l("img",{key:0,src:o.images[0].url,alt:o.name,onClick:_=>n.viewArtist(o.id)},null,8,Re)):O("",!0)]))),256))])):(i(),l("div",Le,[(i(!0),l(f,null,p(this.accountInfo.likedArtists,o=>(i(),l("img",{src:o.images[0].url,alt:o.name,onClick:_=>this.$router.push({name:"ArtistPage",params:{aid:o.id}})},null,8,Te))),256))]))])])]),Ce])])]),Be])])):(i(),l("div",Fe,[e("section",Se,[e("div",Ee,[e("h4",Ne,[U("You are not logged into your account. To login click "),e("h3",Oe,[e("strong",null,[e("a",{onClick:t[12]||(t[12]=o=>n.opensignin())},"here")])]),U(" or to create an account click "),e("h3",Ve,[e("strong",null,[e("a",{onClick:t[13]||(t[13]=o=>n.opensignup())},"here")])])]),De])])]))}const C=N(G,[["render",qe],["__scopeId","data-v-ff6b284b"]]),ze={class:"wrapper"},Me={name:"AboutUs",components:{TheHeader:L,AccountPageBody:C,TheFooter:T}},$e=Object.assign(Me,{setup(s){return(t,c)=>(i(),l(f,null,[e("header",null,[I(L),e("div",ze,[I(C)])]),e("main",null,[I(T)])],64))}});export{$e as default};
