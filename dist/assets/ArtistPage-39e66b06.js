import{g as T,a as z,h as u,b as B,d as P,j as y,r as k,u as A,k as g,e as p,s as x,T as L,f as N}from"./TheFooter-308554e2.js";import{_ as D,r as $,o as c,c as h,a as s,f as m,b as w,t as _,n as C,F as I,i as O,h as j,p as G,e as F}from"./index-c0ad6cf9.js";const f=T(B),M=z(B),V=u(f,"getSpotifyToken"),U=u(f,"getArtist"),E=u(f,"getAlbums"),R=u(f,"getRelatedArtists"),H=u(f,"getUnrelatedArtists"),v=u(f,"updateProfile"),q=u(f,"broadcastToListeners"),J=u(f,"getArtistInfo"),K={data(){return{artist:"",genres:"",albums:[],mostRelated:"",leastRelated:"",lastSuggestedGenre:"",loggedIn:!1,token:"",sortByNewest:!0,info:""}},created(){P(M,t=>{t?this.loggedIn=!0:this.loggedIn=!1})(),V().then(t=>{this.token=t.data.access_token,this.refresh(this.$route.params.aid,!1)}).catch(t=>{console.log(t)})},methods:{refresh(e,t){t||y(this),U({token:this.token,id:e}).then(o=>{this.artist=o.data,this.genres="",o.data.genres.forEach(n=>{this.genres+=n+" - "}),E({token:this.token,id:e}).then(n=>{this.albums=n.data.items.sort(this.compareDates),t||J({artist:this.artist.name,sentences:2}).then(a=>{a.data.code===0?this.info=a.data.info:this.info="",R({token:this.token,id:e}).then(i=>{let d=0;do{if(d==20){R({token:this.token,id:i.data.artists[19].id}).then(l=>{d=0;do{if(d==20){this.mostRelated=l.data.artists[19];return}this.mostRelated=l.data.artists[d],d++}while(k(this.mostRelated))});return}this.mostRelated=i.data.artists[d],d++}while(k(this.mostRelated));A(this.mostRelated),H({token:this.token,limit:20,genres:o.data.genres,backup:this.lastSuggestedGenre}).then(l=>{console.log(l.data),this.lastSuggestedGenre=l.data.genre;let b=0;do this.leastRelated=l.data.artists[b],b++;while(k(this.leastRelated));A(this.leastRelated),g()}).catch(l=>{console.log(l),g()})}).catch(i=>{console.log(i),g()})}).catch(a=>{console.log(a),g()})}).catch(n=>{console.log(n),t||g()})}).catch(o=>{console.log(o),t||g()})},toggleLikeAlbum(e){this.toggleLike(e,"likedAlbums")},toggleLikeArtist(e){this.toggleLike(e,"likedArtists")},toggleLike(e,t){if(this.loggedIn){let o=p();if(o[t].find(n=>n.id==e.id)){o[t].splice(o[t].indexOf(e),1);let n=o[t];v({field:t,value:n}).catch(a=>{console.log(a)}),x(o),this.refresh(this.$route.params.aid,!0)}else{o[t].push(e);let n=o[t];v({field:t,value:n}).then(()=>{this.refresh(this.$route.params.aid,!0)}).catch(a=>{console.log(a)}),x(o)}}else console.log("Not Logged In")},isRepeat(e){let t=this.albums.indexOf(e);if(t==0)return!1;if(t!=-1){let o=this.albums[t-1];return e.name==o.name}},compareDates(e,t){let o=new Date(e.release_date),n=new Date(t.release_date),a=o<n;return this.sortByNewest&&(a=o>n),a?-1:o===n?0:1},sortBy(e){this.sortByNewest=e,this.refresh(this.$route.params.aid,!0)},goToNewArtist(e){this.loggedIn&&v({field:"suggestedArtists",value:p().suggestedArtists}).catch(t=>{console.log(t)}),this.$router.push({name:"ArtistPage",params:{aid:e}}),this.refresh(e,!1)},isLikedAlbum(e){return this.checkLike(e,p().likedAlbums)},isLikedArtist(e){return this.checkLike(e,p().likedArtists)},checkLike(e,t){return this.loggedIn&&t.length>0?t.find(o=>o.id==e.id):!1},recommendArtist(){this.loggedIn?(y(this),q({artist:this.artist}).then(e=>{console.log(e.data),g()}).catch(e=>{console.log(e),g()})):console.log("Not Logged In")}}},r=e=>(G("data-v-03fdface"),e=e(),F(),e),Q={class:"px-4 py-5 text-center",style:{color:"white","background-color":"black"}},W={class:"display-5 fw-bold artistName",style:{"padding-top":"10%","font-size":"55px"}},X=r(()=>s("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"},null,-1)),Y={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"1DB954"}},Z=r(()=>s("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),tt=[Z],et={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"white","font-size":"48px"}},st=r(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),ot=[st],lt={class:"col-lg-6 mx-auto"},nt={class:"artistGenre"},it=r(()=>s("br",null,null,-1)),at={class:"artistGenre"},rt={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},dt=r(()=>s("br",null,null,-1)),ct=r(()=>s("br",null,null,-1)),ht=r(()=>s("br",null,null,-1)),gt={class:"col-lg-6 mx-auto"},ut={class:"btn-group btn-group-toggle","data-toggle":"buttons"},ft=r(()=>s("br",null,null,-1)),_t=r(()=>s("br",null,null,-1)),pt=r(()=>s("br",null,null,-1)),mt={style:{"background-color":"black"}},bt={class:"row"},kt={key:0},wt=["src"],vt=["onClick"],yt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"1DB954"}},At=r(()=>s("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),xt=[At],Ct={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22.5",height:"22.5",fill:"currentColor",class:"fa fa-heart",viewBox:"0 0 16 16",style:{color:"white"}},Rt=r(()=>s("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),Bt=[Rt],Lt={class:"col-2.5"},Nt={style:{"font-size":"14px"}},It={style:{"font-size":"12px"}};function St(e,t,o,n,a,i){const d=$("router-link");return c(),h("section",Q,[s("h1",W,[X,m(d,{type:"button",class:"fa fa-angle-double-left",style:{"font-size":"48px",color:"white","background-color":"black","text-decoration":"none","text-indent":"20px"},to:"/Search"}),w(" "+_(this.artist.name)+" ",1),s("button",{onClick:t[0]||(t[0]=l=>i.toggleLikeArtist(this.artist)),type:"button",class:"btn btn",style:{"border-color":"black"}},[i.isLikedArtist(this.artist)?(c(),h("svg",Y,tt)):(c(),h("svg",et,ot))]),s("button",{onClick:t[1]||(t[1]=(...l)=>i.recommendArtist&&i.recommendArtist(...l)),type:"button",class:"btn btn",style:{"border-color":"black"}},"Recommended To Listeners")]),s("div",lt,[s("p",nt,_(this.genres),1),it,s("p",at,_(this.info),1),s("div",rt,[s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[2]||(t[2]=l=>i.goToNewArtist(this.mostRelated.id))},"Related Artist: "+_(this.mostRelated.name),1),s("button",{type:"button",class:"btn btn-lg px-4 gap-3 btn-get-started",onClick:t[3]||(t[3]=l=>i.goToNewArtist(this.leastRelated.id))},"Unrelated Artist: "+_(this.leastRelated.name),1)])]),dt,ct,ht,s("div",gt,[s("div",ut,[s("label",{class:C(["btn btn-secondary",{active:this.sortByNewest}])},[s("input",{type:"radio",style:{display:"none"},id:"Newest",autocomplete:"off",checked:"",onClick:t[4]||(t[4]=l=>i.sortBy(!0))}),w(" Newest ")],2),s("label",{class:C(["btn btn-secondary",{active:!this.sortByNewest}])},[s("input",{type:"radio",style:{display:"none"},id:"Oldest",autocomplete:"off",onClick:t[5]||(t[5]=l=>i.sortBy(!1))}),w(" Oldest ")],2)])]),ft,_t,pt,s("ul",mt,[(c(!0),h(I,null,O(this.albums,l=>(c(),h("li",null,[s("div",bt,[this.isRepeat(l)?j("",!0):(c(),h("div",kt,[s("img",{src:l.images[0].url,alt:"Album Cover"},null,8,wt),s("button",{onClick:b=>i.toggleLikeAlbum(l),type:"button",class:"btn btn",style:{position:"absolute"}},[i.isLikedAlbum(l)?(c(),h("svg",yt,xt)):(c(),h("svg",Ct,Bt))],8,vt)])),s("div",Lt,[s("h1",Nt,_(l.name),1),s("h3",It,_(l.release_date),1)])])]))),256))])])}const S=D(K,[["render",St],["__scopeId","data-v-03fdface"]]),Tt={class:"wrapper"},zt={name:"ArtistPage",components:{TheHeader:L,ArtistPageBody:S,TheFooter:N}},$t=Object.assign(zt,{setup(e){return(t,o)=>(c(),h(I,null,[s("header",null,[m(L),s("div",Tt,[m(S)])]),s("main",null,[m(N)])],64))}});export{$t as default};
