import{g as f,h as c,c as k,T as _,a as m}from"./TheFooter-2b55af18.js";import{_ as A,o as r,c as l,b as s,t as i,F as h,i as b,g as v,p as R,h as $,d as u}from"./index-61ddf6ad.js";const d=f(k),y=c(d,"getSpotifyToken"),N=c(d,"getArtist"),x=c(d,"getAlbums"),T=c(d,"getRelatedArtists"),w={data(){return{artistName:"",albums:[],mostRelated:""}},created(){this.refresh()},methods:{refresh(){y().then(e=>{N({token:e.data.access_token,id:this.$route.params.aid}).then(t=>{this.artistName=t.data.name,x({token:e.data.access_token,id:this.$route.params.aid}).then(a=>{this.albums=a.data.items.sort(this.compareDates),T({token:e.data.access_token,id:this.$route.params.aid}).then(o=>{console.log(o),this.mostRelated=o.data.artists[0]}).catch(o=>{console.log(o)})}).catch(a=>{console.log(a)})}).catch(t=>{console.log(t)})}).catch(e=>{console.log(e)})},isRepeat(e){let t=this.albums.indexOf(e);if(t==0)return!1;if(t!=-1){let a=this.albums[t-1];return e.name==a.name}},compareDates(e,t){let a=new Date(e.release_date),o=new Date(t.release_date);return a<o?-1:a>o?1:0},goToNewArtist(e){this.$router.push({name:"ArtistPage",params:{aid:e}}),this.refresh()}}},B=e=>(R("data-v-840c1ed4"),e=e(),$(),e),D={key:0,class:"albumResult"},S=["src"],C={style:{display:"inline-block"}},F=B(()=>s("br",null,null,-1));function I(e,t,a,o,O,g){return r(),l(h,null,[s("section",null,[s("p",null,i(this.artistName),1),s("button",{onClick:t[0]||(t[0]=n=>g.goToNewArtist(this.mostRelated.id))},"Related Artist: "+i(this.mostRelated.name),1)]),s("section",null,[s("ul",null,[(r(!0),l(h,null,b(this.albums,n=>(r(),l("li",null,[this.isRepeat(n)?v("",!0):(r(),l("div",D,[s("img",{src:n.images[0].url,alt:"Album Cover"},null,8,S),s("div",C,[s("h1",null,i(n.name),1),F,s("h3",null,i(n.release_date),1)])]))]))),256))])])],64)}const p=A(w,[["render",I],["__scopeId","data-v-840c1ed4"]]),P={class:"wrapper"},V={name:"ArtistPage",components:{TheHeader:_,ArtistPageBody:p,TheFooter:m}},H=Object.assign(V,{setup(e){return(t,a)=>(r(),l(h,null,[s("header",null,[u(_),s("div",P,[u(p)])]),s("main",null,[u(m)])],64))}});export{H as default};
